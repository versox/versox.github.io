{"version":3,"sources":["constants.js","apiHelper.js","editor/song/Track.js","editor/song/Block.js","editor/song/Song.js","editor/song/EditableSong.js","editor/blockEdit/Tile.js","editor/InstrEdit.js","editor/blockEdit/Line.js","editor/blockEdit/BlockEdit.js","editor/time/Block.js","editor/time/Track.js","editor/Editor.js","editor/time/Time.js","SongRating.js","SongPlayer.js","SongList.js","Home.js","Login.js","layout/TextInput.js","Register.js","Profile.js","MenuDropdown.js","Logout.js","App.js","serviceWorker.js","index.js"],"names":["constant","ROOT_PATH","songs","getResponse","xhr","getResponseHeader","includes","JSON","parse","response","makeApiRequest","method","route","body","arguments","length","undefined","Promise","resolve","reject","XMLHttpRequest","open","token","Cookies","setRequestHeader","onload","this","status","request","onerror","stringify","send","apiHelper","getCaptcha","then","catch","err","register","inputData","captchaKey","req","captcha","answer","key","login","user","pass","username","password","res","name","toLowerCase","expires","refreshSecret","logout","createSongDirty","song","console","log","id","createSong","songData","updateSong","getSongsDirty","userId","url","getSongs","popular","delimiterId","params","str","encodeURIComponent","serializeParams","getSong","rateSong","rating","fetchUser","isLoggedIn","getCurrentUser","e","Track","track","Object","classCallCheck","blocks","settings","typeId","metadata","types","dataValues","off","on","start","end","mid","convertFromData","data","block","i","dataLine","line","j","value","push","type","clickF","startF","endF","midF","Block","storedBlock","months","getFormattedDate","date","currentDate","Date","getDate","getMonth","getFullYear","totMin","Math","floor","hours","minutes","hourString","minuteString","Song","songMeta","tracks","bpm","blockLength","createDate","updateDate","author","ratings","setKey","loaded","progressListeners","freq","keyType","step","Tone","Frequency","transpose","synth","releaseAll","instruments","activeBlock","_this","Transport","cancel","PolySynth","Synth","toMaster","count","loop","Loop","time","triggerAttackRelease","triggerAttack","triggerRelease","initialized","init","loopEnd","progressTickEvent","scheduleRepeat","pct","seconds","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","keys","Symbol","iterator","next","done","return","bind","pauseTime","stop","clear","_this2","APIHelper","getSendableSong","promise","json","sendableSong","map","convertToData","abs","context","listener","EditableSong","possibleConstructorReturn","getPrototypeOf","call","selectedTrack","Tile","Component","props","state","tile","event","dragger","active","forceUpdate","react_default","a","createElement","class","onMouseDown","onMouseUp","onMouseMove","Line","tiles","blockEdit_Tile","lineNum","BlockEdit","lines","blockEdit_Line","Template","remove","className","onClick","time_Block","Editor","playing","error","keysArray","keyOptions","ready","songId","match","load","parsed","setState","errComp","notificationTask","clearTimeout","setTimeout","saveBtn","pause","play","evt","_this3","preventDefault","scheduleButtonReset","save","newState","val","target","setName","setBPM","_this4","style","margin-top","handleToggle","onChange","onSubmit","onSave","required","placeholder","minWidth","disabled","blockEdit_BlockEdit","SongRating","hover","userValue","currentUserRating","pos","changeable","stars","classes","ceil","onMouseEnter","onMouseLeave","setRating","SongPlayer","redirect","to","playBtn","addProgressListener","assertThisInitialized","progress","loading","onPlayPause","Redirect","background","onEdit","href","constants","width","src_SongRating","getFormattedCreate","hasBeenUpdated","getFormattedUpdate","SongList","loadMore","hasOwnProperty","src_SongPlayer","Home","slide1","backgroundImage","slide2","slide3","data-ride","data-target","data-slide-to","role","data-slide","aria-hidden","src_SongList","Link","Login","fieldErrors","refs","message","charAt","toUpperCase","substring","errors","input","ref","hideError","margin","TextInput","Register","dangerouslySetInnerHTML","__html","image","ensureErrorCorrection","getValue","clientError","loginRequest","captchaError","layout_TextInput","Profile","MenuDropdown","toggleOpen","data-toggle","item","title","items","listItem","path","Logout","App","menu","userOnly","navBarItems","menuItem","src_MenuDropdown","window","location","pathname","BrowserRouter","basename","aria-controls","aria-expanded","aria-label","Route","component","aria-haspopup","aria-labelledby","exact","Boolean","hostname","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","registration","unregister"],"mappings":"wTAIeA,EAJE,CACbC,UAAW,KCITC,EAAQ,2sGAWRC,EAAc,SAACC,GAEpB,OADoBA,EAAIC,kBAAkB,gBAC1BC,SAAS,oBACjBC,KAAKC,MAAMJ,EAAIK,UAEfL,EAAIK,UAGPC,EAAiB,SAACC,EAAQC,GAAuB,IAAhBC,EAAgBC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAT,KAC7C,OAAO,IAAIG,QAAQ,SAAUC,EAASC,GACrC,IAAIf,EAAM,IAAIgB,eACdhB,EAAIiB,KAAKV,EAAQX,EAASC,UAAY,OAASW,GAC/C,IAAMU,EAAQC,MAAY,SACtBD,GACHlB,EAAIoB,iBAAiB,gBAAiBF,GACvClB,EAAIqB,OAAS,WACRC,KAAKC,QAAU,KAAOD,KAAKC,OAAS,IACvCT,EAAQd,GAERe,EAAO,CACNQ,OAAQD,KAAKC,OACbC,QAASxB,KAIZA,EAAIyB,QAAU,WACbV,EAAO,CACNQ,OAAQD,KAAKC,OACbC,QAASxB,KAGC,MAARS,GAAgC,qBAATA,GAC1BT,EAAIoB,iBAAiB,eAAgB,oBACjB,kBAATX,IACVA,EAAON,KAAKuB,UAAUjB,IACvBT,EAAI2B,KAAKlB,IAETT,EAAI2B,UAgKQC,EAnJG,CACjBC,WAAY,WACX,OAAO,IAAIhB,QAAQ,SAASC,EAASC,GACpCT,EAAe,MAAO,iBACpBwB,KAAK,SAAC9B,GAAD,OAASc,EAAQf,EAAYC,MAClC+B,MAAM,SAACC,GAAD,OAASjB,EAAOiB,QAG1BC,SAAU,SAASC,EAAWC,GAC7B,IAAMC,EAAM,IAAIpB,eAUhB,OATAoB,EAAInB,KAAK,OAAQrB,EAASC,UAAY,qBAAqB,GAC3DuC,EAAIhB,iBAAiB,eAAgB,oBACjCc,EAAUG,UACbH,EAAUG,QAAU,CACnBC,OAAQJ,EAAUG,QAClBE,IAAKJ,IAGPC,EAAIT,KAAKxB,KAAKuB,UAAUQ,IACjBE,GAERI,MAAO,SAASC,EAAMC,GACrB,IAAMN,EAAM,IAAIpB,eAOhB,GANAoB,EAAInB,KAAK,OAAQrB,EAASC,UAAY,kBAAkB,GACxDuC,EAAIhB,iBAAiB,eAAgB,oBACrCgB,EAAIT,KAAKxB,KAAKuB,UAAU,CACvBiB,SAAUF,EACVG,SAAUF,KAEQ,MAAfN,EAAIb,OAAgB,CACvB,IAAIsB,EAAM1C,KAAKC,MAAMgC,EAAI/B,UACzBc,MAAY,OAAQhB,KAAKuB,UAAU,CAACoB,KAAMD,EAAIC,KAAMH,SAAUF,EAAKM,iBAAmB,UAAW,CAChGC,QA/FgB,EAAE,KAiGnB7B,MAAY,QAAS0B,EAAI3B,MAAO,CAC/B8B,QAlGgB,EAAE,KAoGnB7B,MAAY,SAAU0B,EAAII,cAAe,CACxCD,QArGgB,EAAE,KAwGpB,OAAOZ,GAERc,OAAQ,WACP/B,SAAe,QACfA,SAAe,SACfA,SAAe,WAEhBgC,gBAAiB,SAASC,GACzB,IAAIlC,EAAQC,MAAY,SACxB,QAAeP,IAAVM,EAAsB,CAC1B,IAAIkB,EAAM,IAAIpB,eAMd,GALAoB,EAAInB,KAAK,OAAQrB,EAASC,UAAY,oBAAoB,GAC1DuC,EAAIhB,iBAAiB,eAAgB,oBACrCgB,EAAIhB,iBAAiB,gBAAiBF,GACtCkB,EAAIT,KAAKxB,KAAKuB,UAAU0B,IACxBC,QAAQC,IAAIlB,EAAI/B,UACG,MAAf+B,EAAIb,OACP,OAAOa,EAAI/B,SAASkD,QAGrBF,QAAQC,IAAI,mBAGdE,WAAY,SAASC,GACpB,OAAO,IAAI5C,QAAQ,SAACC,EAASC,GAC5BT,EAAe,OAAQ,eAAgBmD,GACrC3B,KAAKhB,GACLiB,MAAMhB,MAGV2C,WAAY,SAASH,EAAIE,GACxB,OAAO,IAAI5C,QAAQ,SAACC,EAASC,GAC5BT,EAAe,OAAQ,gBAAgBiD,EAAIE,GACzC3B,KAAKhB,GACLiB,MAAMhB,MAGV4C,cAAe,SAASC,GACvB,IACIC,EADAzB,EAAM,IAAIpB,eAGb6C,OADajD,IAAXgD,EACIhE,EAASC,UAAY,YAErBD,EAASC,UAAY,wBAA0B+D,EAEtDxB,EAAInB,KAAK,MAAO4C,GAAK,GACrB,IAAM3C,EAAQC,MAAY,SAI1B,OAHID,GACHkB,EAAIhB,iBAAiB,gBAAiBF,GACvCkB,EAAIT,OACe,MAAfS,EAAIb,OACApB,KAAKC,MAAMgC,EAAI/B,UAEf,IAGTyD,SAAU,WAA6D,IAApDF,EAAoDlD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAA3C,KAAMqD,EAAqCrD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAApBsD,EAAoBtD,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,KAC1DuD,EAAS,GAIf,OAHIL,IAAQK,EAAOL,OAASA,GACxBG,IAASE,EAAOF,QAAU,GAC1BC,IAAaC,EAAOD,YAAcA,GAC/B,IAAInD,QAAQ,SAASC,EAASC,GACpCT,EAAe,MAAO,QAjHD,SAAS2D,GAChC,IAAIC,EAAM,GACV,IAAK,IAAM3B,KAAO0B,EACL,KAARC,IACHA,GAAO,KACRA,GAAO3B,EAAM,IAAM4B,mBAAmBF,EAAO1B,IAE9C,OAAO2B,EAAIvD,OAAS,EAAI,IAAIuD,EAAM,GA0GFE,CAAgBH,IAC5CnC,KAAK,SAAC9B,GAAD,OAASc,EAAQf,EAAYC,MAClC+B,MAAM,SAACC,GAAD,OAASjB,EAAOiB,QAG1BqC,QAAS,SAASd,GAAqB7C,UAAAC,OAAA,QAAAC,IAAAF,UAAA,IAAAA,UAAA,GAUtC,OAJkB,IAAIG,QAAQ,SAACC,EAASC,GACvCD,EAAQhB,EAAMyD,OAKhBe,SAAU,SAASf,GAAmB,IAAfgB,EAAe7D,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAN,KAC/B,OAAO,IAAIG,QAAQ,SAASC,EAASC,GACpCT,EAAe,OAAQ,cAAciD,GAAIgB,EAAS,IAAIA,EAAS,KAC7DzC,KAAK,kBAAMhB,GAAQ,KACnBiB,MAAM,SAACC,GAAD,OAASjB,EAAOiB,QAG1BwC,UAAW,SAAS7B,GACnB,OAAO,IAAI9B,QAAQ,SAASC,EAASC,GACpCT,EAAe,MAAO,cAAcqC,GAClCb,KAAK,SAAC9B,GAAD,OAASc,EAAQf,EAAYC,MAClC+B,MAAM,SAACC,GAAD,OAASjB,EAAOiB,QAG1ByC,WAAY,WACX,QAAStD,MAAY,UAEtBuD,eAAgB,WACf,IAAKvD,MAAY,WAAaA,MAAY,QAAS,OAAO,KAC1D,IACC,OAAOhB,KAAKC,MAAMe,MAAY,SAC7B,MAAOwD,GACR,OAAO,wBC9LKC,EAjBX,SAAAA,EAAYC,GAAQC,OAAAC,EAAA,EAAAD,CAAAxD,KAAAsD,GAEnBtD,KAAKuD,WADMjE,KAAViE,EACYA,EAEA,CAChBG,OAAQ,CACJ,GAEJC,SAAU,CACNC,OAAQ,EACRC,SAAU,WCXVC,EAAQ,CAAC,MAAO,KAAM,QAAS,MAAO,OACtCC,EAAa,CACfC,IAAO,EAAGC,GAAM,EAAGC,MAAS,EAAGC,IAAO,EAAGC,IAAO,GAIhDC,EAAkB,SAACC,EAAMC,GACzB,IAAK,IAAIC,EAAI,EAAGA,EAAIF,EAAKjF,OAAQmF,IACjC,CAGH,IAFA,IAAIC,EAAWH,EAAKE,GAChBE,EAAO,GACFC,EAAI,EAAGA,EAAIF,EAASpF,OAAQsF,IACrC,CACI,IAAIC,EAAQH,EAASE,GACrBD,EAAKG,KAAK,CACbC,KAAMhB,EAAMc,GACZG,OAAQ,WACa,QAAd/E,KAAK8E,KAEX9E,KAAK8E,KAAO,KAIZ9E,KAAK8E,KAAO,OAGbE,OAAQ,WACJhF,KAAK8E,KAAO,SAEhBG,KAAM,WACFjF,KAAK8E,KAAO,OAEhBI,KAAM,WACFlF,KAAK8E,KAAO,SAIjBP,EAAMM,KAAKH,KA2DGS,aArDX,SAAAA,EAAYC,GAEf,GAF6B5B,OAAAC,EAAA,EAAAD,CAAAxD,KAAAmF,GAC7BnF,KAAKuE,MAAQ,QACSjF,IAAhB8F,EAEFf,EAAgBe,EAAYd,KAAMtE,KAAKuE,YAGvC,IAAK,IAAIC,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAEhC,IADA,IAAIE,EAAO,GACHC,EAAI,EAAGA,EAAI,GAAIA,IACnBD,EAAKG,KAAK,CACbC,KAAM,MACNC,OAAQ,WACa,QAAd/E,KAAK8E,KAEX9E,KAAK8E,KAAO,KAIZ9E,KAAK8E,KAAO,OAGbE,OAAQ,WACJhF,KAAK8E,KAAO,SAEhBG,KAAM,WACFjF,KAAK8E,KAAO,OAEhBI,KAAM,WACFlF,KAAK8E,KAAO,SAIjB9E,KAAKuE,MAAMM,KAAKH,gEAOjB,IADA,IAAIJ,EAAO,GACFE,EAAI,EAAGA,EAAIxE,KAAKuE,MAAMlF,OAAQmF,IAAK,CAGxC,IAFA,IAAIE,EAAO1E,KAAKuE,MAAMC,GAClBC,EAAW,GACNE,EAAI,EAAGA,EAAID,EAAKrF,OAAQsF,IAAK,CACzC,IAAIC,EAAQF,EAAKC,GAAGG,KACpBL,EAASI,KAAKd,EAAWa,IAEtBN,EAAKO,KAAKJ,GAEd,OAAOH,WCwFFe,EAAS,CAAC,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,OAAQ,MAAO,MAAO,MAAO,MAAO,OAE9F,SAASC,EAAiBC,GACzB,IAAIC,EAAc,IAAIC,KAEtB,GAAGD,EAAYE,YAAcH,EAAKG,WAC9BF,EAAYG,aAAeJ,EAAKI,YAChCH,EAAYI,gBAAkBL,EAAKK,cACvC,CACC,IAAIC,EAASC,KAAKC,OAAOP,EAAcD,GAAQ,KAC3CS,EAAQF,KAAKC,MAAMF,EAAS,IAC5BI,EAAUJ,EAAS,GACnBK,EAAa,OAEjB,GADGF,EAAQ,IAAGE,GAAc,KACb,IAAZD,EAEF,OAAOD,EAAQ,IAAME,EAAa,QAEnC,IAAIC,EAAe,SAEnB,OADGF,EAAU,IAAGE,GAAgB,KACnB,IAAVH,EAEKC,EAAU,IAAME,EAAe,OAEhCH,EAAQ,IAAME,EAAa,QAAUD,EAAU,IAAME,EAAe,OAE5E,OAAOd,EAAOE,EAAKI,YAAc,IAAMJ,EAAKG,UAAY,KAAOH,EAAKK,cAGtDQ,iBAzMd,SAAAA,EAAYC,GAAW7C,OAAAC,EAAA,EAAAD,CAAAxD,KAAAoG,GACtBpG,KAAK0D,OAAS,GACd1D,KAAKsG,OAAS,QACKhH,IAAb+G,GAELrG,KAAKwB,KAAO6E,EAAS7E,KACrBxB,KAAKuG,IAAMF,EAASE,IACpBvG,KAAKwG,YAAcH,EAASG,YAE5BxG,KAAKyG,WAAa,IAAIhB,KAAKY,EAASI,YACpCzG,KAAK0G,WAAaL,EAASK,WAAa,IAAIjB,KAAKY,EAASK,YAAc,KACxE1G,KAAK2G,OAASN,EAASlF,KAAKK,KAC5BxB,KAAKqB,SAAWgF,EAASlF,KAAKE,SAC9BrB,KAAK4G,QAAUP,EAASO,QAExB5G,KAAKiC,GAAKoE,EAASpE,KAGnBjC,KAAKwB,KAAO,eACZxB,KAAKuG,IAAM,IACXvG,KAAKwG,YAAc,GAEpBxG,KAAK6G,SACL7G,KAAK8G,QAAS,EACd9G,KAAK+G,kBAAoB,sDAGnBC,EAAMlC,GACZ9E,KAAKgH,KAAOA,GAAQ,IACpBhH,KAAKiH,QAAUnC,GAAQ,MACvB9E,KAAKiB,IAAM,GACXjB,KAAKiB,IAAI,IAAOjB,KAAKgH,KAAO,IAI5B,IAHA,IAAIE,EAAiB,QAATpC,EACX,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GAC/B,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,GACvBN,EAAI,GAAIG,EAAI,EAAGH,GAAK,EAAGA,IAAKG,IACpC3E,KAAKiB,IAAIuD,GAAK2C,IAAKC,UAAUpH,KAAKiB,IAAIuD,EAAE,IAAI6C,UAAUH,EAAKvC,IAExD3E,KAAKsH,OAAOtH,KAAKsH,MAAMC,0CAGvBlB,GAEJ,GADArG,KAAK0D,OAAOmB,KAAK,WACFvF,IAAZU,KAAKiC,SAAiC3C,IAAb+G,EAG3BrG,KAAK0D,OAAOmB,KAAK,IAAIM,GACrBnF,KAAKsG,OAAOzB,KAAK,IAAIvB,OACf,CAEN,IAAK,IAAIkB,EAAI,EAAGA,EAAI6B,EAASmB,YAAYnI,OAAQmF,IAChDxE,KAAKsG,OAAOzB,KAAK,IAAIvB,EAAM+C,EAASmB,YAAYhD,KAEjD,IAAK,IAAIA,EAAI,EAAGA,GAAKxE,KAAKwG,YAAahC,IAAK,CAC3C,IAAID,EAAQ,IAAIY,EAAMkB,EAAS3C,OAAOc,IACtCxE,KAAK0D,OAAOmB,KAAKN,IAGnBvE,KAAKyH,YAAczH,KAAK0D,OAAO,GAAGa,MAClCvE,KAAK8G,QAAS,iCAGR,IAAAY,EAAA1H,KACNmH,IAAKQ,UAAUC,SACf5H,KAAKsH,MAAQ,IAAIH,IAAKU,UAAU,EAAGV,IAAKW,OAAOC,WAC/C/H,KAAKgI,MAAQ,EACbhI,KAAKiI,KAAO,IAAId,IAAKe,KAAK,SAACC,GAC1B,IAAK,IAAI3D,EAAI,EAAGA,EAAI,GAAIA,IACvB,OAAOkD,EAAKD,YAAYjD,GAAGkD,EAAKM,OAAOlD,MACtC,IAAK,KACJ4C,EAAKJ,MAAMc,qBAAqBV,EAAKzG,IAAIuD,GAAI,MAAO2D,GACpD,MACD,IAAK,QACJT,EAAKJ,MAAMe,cAAcX,EAAKzG,IAAIuD,GAAI2D,GACtC,MACD,IAAK,MACJT,EAAKJ,MAAMgB,eAAeZ,EAAKzG,IAAIuD,GAAI2D,GAItCT,EAAKM,OAAS,GACjBN,EAAKM,MAAQ,EAEbN,EAAKM,SAEJ,sCAIEhI,KAAKuI,cACTvI,KAAKwI,OACLxI,KAAKuI,aAAc,GAEpBpB,IAAKQ,UAAUc,QAAUzI,KAAKwG,YAAc,IAC5CW,IAAKQ,UAAUM,MAAO,EACtBd,IAAKQ,UAAUpB,IAAI3B,MAAQ5E,KAAKuG,IAEhCvG,KAAK0I,kBAAoBvB,IAAKQ,UAAUgB,eAAe,SAASR,GAC/D,IAAMS,EAAMzB,IAAKQ,UAAUkB,QAAQ1B,IAAKQ,UAAUc,QAClD,KAAIG,EAAM,GAAKA,EAAM,GAArB,CAFqE,IAAAE,GAAA,EAAAC,GAAA,EAAAC,OAAA1J,EAAA,IAIrE,QAAA2J,EAAAC,EAAkBlJ,KAAK+G,kBAAkBoC,OAAzCC,OAAAC,cAAAP,GAAAG,EAAAC,EAAAI,QAAAC,MAAAT,GAAA,OAAW7H,EAAXgI,EAAArE,MACC5E,KAAK+G,kBAAkB9F,GAAK2H,IALwC,MAAAlI,GAAAqI,GAAA,EAAAC,EAAAtI,EAAA,YAAAoI,GAAA,MAAAI,EAAAM,QAAAN,EAAAM,SAAA,WAAAT,EAAA,MAAAC,GAMrEjH,QAAQC,QACPyH,KAAKzJ,MAAO,MACdA,KAAKiI,KAAK/D,MAAM,GAChBiD,IAAKQ,UAAUzD,QACXlE,KAAK0J,YACRvC,IAAKQ,UAAUkB,QAAU7I,KAAK0J,2CAI/B1J,KAAK0J,UAAYvC,IAAKQ,UAAUkB,QAChC7I,KAAKiI,KAAK0B,KAAK,GACfxC,IAAKQ,UAAUgC,OACf3J,KAAKsH,MAAMC,aACXJ,IAAKQ,UAAUiC,MAAM5J,KAAK0I,kDAGpB,IAAAmB,EAAA7J,KACN,GAAKA,KAAKiC,GAUT,OAAO6H,EAAU1H,WAAWpC,KAAKiC,GAAIjC,KAAK+J,mBAR1C,IAAMC,EAAUF,EAAU5H,WAAWlC,KAAK+J,mBAK1C,OAJAC,EAAQxJ,KAAK,SAAC9B,GACb,IAAMuL,EAAOpL,KAAKC,MAAMJ,EAAIK,UAC5B8K,EAAK5H,GAAKgI,EAAKhI,KAET+H,4CAkBR,IATA,IAAIE,EAAe,CAClB1I,KAAMxB,KAAKwB,KACX+E,IAAKvG,KAAKuG,IACVC,YAAaxG,KAAKwG,YAClBgB,YAAaxH,KAAKsG,OAAO6D,IAAI,SAAC5G,GAC7B,OAAOA,EAAMA,QAEdG,OAAQ,IAEDc,EAAI,EAAGA,GAAMxE,KAAK0D,OAAOrE,OAAS,EAAImF,IAC7C0F,EAAaxG,OAAOc,GAAK,CACxBF,KAAMtE,KAAK0D,OAAOc,GAAG4F,iBAGvB,OAAOF,+CAIP,OAAO5E,EAAiBtF,KAAKyG,yDAI7B,OAAOnB,EAAiBtF,KAAK0G,qDAI7B,OAAO1G,KAAK0G,YAAcZ,KAAKuE,IAAIrK,KAAKyG,WAAazG,KAAK0G,aAAe,+CAEtD4D,EAASC,GAC5BvK,KAAK+G,kBAAkBlC,KAAK0F,EAASd,KAAKa,oCAG1C,OAAOtK,KAAKiC,GAAKjC,KAAKiC,GAAK,cCzJduI,cAnBX,SAAAA,EAAYnE,GAAU,IAAAqB,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAxD,KAAAwK,IACzB9C,EAAAlE,OAAAiH,EAAA,EAAAjH,CAAAxD,KAAAwD,OAAAkH,EAAA,EAAAlH,CAAAgH,GAAAG,KAAA3K,KAAMqG,KACDuE,cAAgB,EAFIlD,2GASdlG,GACXxB,KAAKwB,KAAOA,iCAGF+E,GACVvG,KAAKuG,IAAMA,EACXY,IAAKQ,UAAUpB,IAAI3B,MAAQ5E,KAAKuG,WAhBNH,GC8CZyE,GC/CSC,wBDCpB,SAAAD,EAAYE,GAAO,IAAArD,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAxD,KAAA6K,IACtBnD,EAAAlE,OAAAiH,EAAA,EAAAjH,CAAAxD,KAAAwD,OAAAkH,EAAA,EAAAlH,CAAAqH,GAAAF,KAAA3K,KAAM+K,KACDC,MAAQD,EAAME,KAFGvD,2EAKPwD,wCAGAA,GACflL,KAAK+K,MAAMI,QAAQC,OAASpL,KAAK+K,MAAMrG,KACvC1E,KAAK+K,MAAMI,QAAQjH,MAAQlE,uCAKdkL,GACVlL,KAAK+K,MAAMrG,OAAS1E,KAAK+K,MAAMI,QAAQC,SAEnCpL,KAAK+K,MAAMI,QAAQjH,QAAUlE,KAEnCA,KAAKgL,MAAMjG,UAIX/E,KAAK+K,MAAMI,QAAQjH,MAAM8G,MAAMhG,SAC/BhF,KAAK+K,MAAMI,QAAQjH,MAAMmH,cACzBrL,KAAKgL,MAAM/F,QAERjF,KAAKqL,eAETrL,KAAK+K,MAAMI,QAAQC,OAAS,sCAI5B,OACIE,EAAAC,EAAAC,cAAA,OACHC,MAAO,QAAWzL,KAAKgL,MAAMlG,KAC7B4G,YAAa1L,KAAK0L,YAAYjC,KAAKzJ,MACnC2L,UAAW3L,KAAK2L,UAAUlC,KAAKzJ,MAC/B4L,YAAa5L,KAAK4L,YAAYnC,KAAKzJ,eAxClB8K,cEgBJe,mLAZd,IADA,IAAIC,EAAQ,GACJtH,EAAI,EAAGA,EAAI,GAAIA,IAEnBsH,EAAMjH,KAAKyG,EAAAC,EAAAC,cAACO,EAAD,CAAMd,KAAMjL,KAAK+K,MAAMrG,KAAKF,GAAIE,KAAM1E,KAAK+K,MAAMiB,QAASb,QAASnL,KAAK+K,MAAMI,WAE7F,OACIG,EAAAC,EAAAC,cAAA,OAAKC,MAAM,QACbK,UATgBhB,aCwBJmB,cAtBX,SAAAA,EAAYlB,GAAO,IAAArD,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAxD,KAAAiM,IACtBvE,EAAAlE,OAAAiH,EAAA,EAAAjH,CAAAxD,KAAAwD,OAAAkH,EAAA,EAAAlH,CAAAyI,GAAAtB,KAAA3K,KAAM+K,KACDI,QAAU,CACXC,QAAS,EACTlH,MAAO,MAJWwD,wEAUtB,IADA,IAAIwE,EAAQ,GACJ1H,EAAI,EAAGA,EAAI,GAAIA,IAEnB0H,EAAMrH,KAAKyG,EAAAC,EAAAC,cAACW,EAAD,CAAMzH,KAAM1E,KAAK+K,MAAMxG,MAAMC,GAAIwH,QAASxH,EAAG2G,QAASnL,KAAKmL,WAE1E,OACIG,EAAAC,EAAAC,cAAA,OAAKvJ,GAAG,aACViK,UAjBqBpB,qBCOTsB,mLAPd,OACId,EAAAC,EAAAC,cAAA,mBAHkBV,aCkBRxH,mLAbdtD,KAAK+K,MAAMsB,OAAOrM,uCAIlB,OACIsL,EAAAC,EAAAC,cAAA,OAAKc,UAAU,SAClBhB,EAAAC,EAAAC,cAAA,MAAIe,QAASvM,KAAKqM,OAAO5C,KAAKzJ,OAAQA,KAAK+K,MAAM9I,IACjDqJ,EAAAC,EAAAC,cAACgB,EAAD,cAXkB1B,aC6LL2B,GC7LI3B,wBDOlB,SAAA2B,EAAY1B,GAAO,IAAArD,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAxD,KAAAyM,IAClB/E,EAAAlE,OAAAiH,EAAA,EAAAjH,CAAAxD,KAAAwD,OAAAkH,EAAA,EAAAlH,CAAAiJ,GAAA9B,KAAA3K,KAAM+K,KACDC,MAAQ,CACZ0B,SAAS,EACTC,OAAO,EACPnL,KAAM,GACN+E,IAAK,IACLtF,IAAK,GACLgG,QAAS,IAEVS,EAAKkF,UAAY,CAAC,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAChDlF,EAAKmF,WAAanF,EAAKkF,UAAUzC,IAAI,SAAClJ,GACrC,OAAQqK,EAAAC,EAAAC,cAAA,cAASvK,KAElByG,EAAKoF,OAAQ,EACbpF,EAAKqF,OAAShC,EAAMiC,MAAMrK,OAAOV,GACb,QAAhByF,EAAKqF,QACRrF,EAAK5F,KAAO,IAAI0I,EAChB9C,EAAK5F,KAAKmL,OACVvF,EAAK5F,KAAK0G,OACVd,EAAKoF,OAAQ,QACexN,IAAhBoI,EAAKqF,QACjBjD,EAAU/G,QAAQ2E,EAAKqF,QACrBvM,KAAK,SAACe,GACN,OAAO1C,KAAKC,MAAMyC,KAElBf,KAAK,SAAC0M,GACNxF,EAAK5F,KAAO,IAAI0I,EAAa0C,GAC7BxF,EAAK5F,KAAKmL,KAAKC,GACfxF,EAAK5F,KAAK0G,OACVd,EAAKoF,OAAQ,EACbpF,EAAKyF,SAAS,CACb3L,KAAMkG,EAAK5F,KAAKN,KAChB+E,IAAKmB,EAAK5F,KAAKyE,IACftF,IAAKyG,EAAK5F,KAAKkF,KACfC,QAASS,EAAK5F,KAAKmF,UAEpBS,EAAK2D,gBAEL5K,MAAM,SAACC,GACPgH,EAAKsD,MAAM2B,OAAQ,EACnBjF,EAAKsD,MAAMoC,QAAU9B,EAAAC,EAAAC,cAAA,mCAA2B9K,EAA3B,OAzCNgH,mFA+Cf,gDASkB,IAAAmC,EAAA7J,KACjBA,KAAKqN,kBACRC,aAAatN,KAAKqN,kBACnBrN,KAAKqN,iBAAmBE,WAAW,kBAAM1D,EAAKsD,SAAS,CAACK,QAAS,QAAQ,oDAGrExN,KAAKqN,kBACRC,aAAatN,KAAKqN,yDAInBrN,KAAKmN,SAAS,SAAAnC,GAAK,MAAK,CACvB0B,SAAU1B,EAAM0B,WAEd1M,KAAKgL,MAAM0B,QACb1M,KAAK8B,KAAK2L,QAGVzN,KAAK8B,KAAK4L,sCAILC,GAAK,IAAAC,EAAA5N,KAEX,GADA2N,EAAIE,kBACC7N,KAAK8B,KAAKN,MAA2B,KAAnBxB,KAAK8B,KAAKN,KAKhC,OAJAxB,KAAKmN,SAAS,CACbK,QAAS,SAEVxN,KAAK8N,sBAGN9N,KAAKmN,SAAS,CACbK,QAAS,IAEVxN,KAAK8B,KAAKiM,OAAOvN,KAAK,WACrBoN,EAAKT,SAAS,CACbK,QAAS,IAEVI,EAAKE,wBACHrN,MAAM,WACRmN,EAAKT,SAAS,CACbK,QAAS,IAEVI,EAAKE,yDAIEH,GACR,IAAIK,EAAW,GACXC,EAAMN,EAAIO,OAAOtJ,MACrB,OAAQ+I,EAAIO,OAAOjM,IAClB,IAAK,OACJjC,KAAK8B,KAAKqM,QAAQF,GAClB,MACD,IAAK,MACQ,KAARA,IACCA,EAAM,EACTA,EAAM,EACIA,EAAM,MAChBA,EAAM,KAEPjO,KAAK8B,KAAKsM,OAAOH,IAElB,MACD,IAAK,UACJjO,KAAK8B,KAAK+E,OAAO7G,KAAKgL,MAAM/J,IAAKgN,GACjC,MACD,IAAK,MACJjO,KAAK8B,KAAK+E,OAAOoH,EAAKjO,KAAKgL,MAAM/D,SAEnC+G,EAASL,EAAIO,OAAOjM,IAAMgM,EAC1BjO,KAAKmN,SAASa,oCAGN,IAAAK,EAAArO,KACR,OAAGA,KAAKgL,MAAM2B,MACN3M,KAAKgL,MAAMoC,QAEfpN,KAAK8B,MAAS9B,KAAK8M,MAKtBxB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,uBAAuBgC,MAAO,CAACC,aAAc,SAM3DjD,EAAAC,EAAAC,cAAA,OAAKc,UAAU,UACdhB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,iBACXhB,EAAAC,EAAAC,cAAA,QAAMc,UAAU,eACfhB,EAAAC,EAAAC,cAAA,KAAGe,QAASvM,KAAKwO,aAAa/E,KAAKzJ,MAChCsM,UAAW,OAAStM,KAAKgL,MAAM0B,QAAU,UAAY,aACxDpB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,mBACXhB,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,SAAO5G,MAAO5E,KAAKgL,MAAMzE,IAAKtE,GAAG,MAAMwM,SAAU,SAAAd,GAAG,OAAIU,EAAKI,SAASd,IAAM7I,KAAK,WACjFwG,EAAAC,EAAAC,cAAA,oBACAF,EAAAC,EAAAC,cAAA,UAAQvJ,GAAG,MAAM2C,MAAO5E,KAAKgL,MAAM/J,IAAKwN,SAAU,SAAAd,GAAG,OAAIU,EAAKI,SAASd,KACzE3N,KAAK6M,YAEHvB,EAAAC,EAAAC,cAAA,UAAQiD,SAAU,SAAAd,GAAG,OAAIU,EAAKI,SAASd,IAAM1L,GAAG,UAAU2C,MAAO5E,KAAKgL,MAAM/D,SAC/EqE,EAAAC,EAAAC,cAAA,qBACAF,EAAAC,EAAAC,cAAA,wBAILF,EAAAC,EAAAC,cAAA,OAAKc,UAAU,aACdhB,EAAAC,EAAAC,cAAA,QAAMkD,SAAU,SAACf,GAAD,OAASU,EAAKM,OAAOhB,KACpCrC,EAAAC,EAAAC,cAAA,SAAOoD,UAAQ,EAACH,SAAU,SAAAd,GAAG,OAAIU,EAAKI,SAASd,IAAM/I,MAAO5E,KAAKgL,MAAMxJ,KAAMS,GAAG,OACzE6C,KAAK,OAAO+J,YAAY,WAAWvC,UAAU,eACpDhB,EAAAC,EAAAC,cAAA,SAAO1G,KAAK,SAASwJ,MAAO,CAACQ,SAAU,SAAUlK,MAAO5E,KAAKgL,MAAMwC,QAAkC,IAAvBxN,KAAKgL,MAAMwC,QAAgB,aAAuC,IAAvBxN,KAAKgL,MAAMwC,QAAgB,SAAW,UAAc,OAAQuB,WAAY/O,KAAKgL,MAAMwC,QAASlB,UAAW,QAAStM,KAAKgL,MAAMwC,QAA+C,IAAvBxN,KAAKgL,MAAMwC,QAAgB,cAAgB,aAAzD,kBAIjQlC,EAAAC,EAAAC,cAAA,OAAKc,UAAU,OAEdhB,EAAAC,EAAAC,cAACwD,EAAD,CAAWzK,MAAOvE,KAAK8B,KAAK2F,eAE7B6D,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,WAAKF,EAAAC,EAAAC,cAAA,aAxCHF,EAAAC,EAAAC,cAAA,uBAxISV,sBEgENmE,cApEd,SAAAA,EAAYlE,GAAO,IAAArD,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAxD,KAAAiP,IAClBvH,EAAAlE,OAAAiH,EAAA,EAAAjH,CAAAxD,KAAAwD,OAAAkH,EAAA,EAAAlH,CAAAyL,GAAAtE,KAAA3K,KAAM+K,KACDC,MAAQ,CACZkE,WAAO5P,EACP6P,UAAWzH,EAAKqD,MAAMjJ,KAAK8E,QAAUc,EAAKqD,MAAMjJ,KAAK8E,QAAQwI,kBAAoB,MAElF1H,EAAK9C,MAAQ,IANK8C,4EAQN2H,GACPrP,KAAK+K,MAAMuE,YAEhBtP,KAAKmN,SAAS,CACb+B,MAAOG,2CAIHrP,KAAK+K,MAAMuE,YAEhBtP,KAAKmN,SAAS,CACb+B,WAAO5P,sCAGC2D,GAAQ,IAAA4G,EAAA7J,KACZA,KAAK+K,MAAMuE,aAEhBrM,EAASA,IAAWjD,KAAKgL,MAAMmE,UAAY,KAAOlM,EAClD3C,EAAU0C,SAAShD,KAAK+K,MAAMjJ,KAAKG,GAAIgB,GACrCzC,KAAK,WACLqJ,EAAKsD,SAAS,CACbgC,UAAWlM,MAGZxC,MAAM,SAACC,GAEPqB,QAAQC,IAAItB,uCAKd,IADA,IAAM6O,EAAQ,GACL/K,EAAI,EAAGA,GAAK,EAAGA,IAAK,CAC5B,IAAIgL,EAAU,OACV1J,KAAK2J,KAAKzP,KAAK+K,MAAMnG,QAAUJ,IAC9BxE,KAAK+K,MAAMnG,MAAQJ,EACtBgL,GAAW,QAEXA,GAAW,SAGTxP,KAAKgL,MAAMmE,WAAanP,KAAKgL,MAAMmE,WAAa3K,IACnDgL,GAAW,WAERxP,KAAKgL,MAAMkE,OAASlP,KAAKgL,MAAMkE,OAAS1K,IAC3CgL,GAAW,UAEZD,EAAM1K,KAAKyG,EAAAC,EAAAC,cAAA,OACVc,UAAWkD,EACXE,aAAc1P,KAAK0P,aAAajG,KAAKzJ,KAAMwE,GAC3CmL,aAAc3P,KAAK2P,aAAalG,KAAKzJ,MACrCuM,QAASvM,KAAK4P,UAAUnG,KAAKzJ,KAAMwE,MAGrC,IAAIgL,EAAU,eAAexP,KAAK+K,MAAMuE,WAAa,cAAgB,IACrE,OACChE,EAAAC,EAAAC,cAAA,OAAKc,UAAWkD,GAAUD,UAhEJzE,aC6FV+E,cA1Fd,SAAAA,EAAY9E,GAAO,IAAArD,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAxD,KAAA6P,IAClBnI,EAAAlE,OAAAiH,EAAA,EAAAjH,CAAAxD,KAAAwD,OAAAkH,EAAA,EAAAlH,CAAAqM,GAAAlF,KAAA3K,KAAM+K,KACDC,MAAQ,CACZ8E,UAAU,EACVC,GAAI,GACJC,QAAS,WACTtD,SAAS,GAEVhF,EAAK5F,KAAOiJ,EAAMjJ,KAClB4F,EAAK5F,KAAKmO,oBAAVzM,OAAA0M,EAAA,EAAA1M,QAAA0M,EAAA,EAAA1M,CAAAkE,IAAoC,SAACkB,GACpClB,EAAKyF,SAAS,CACbgD,SAAUrK,KAAKC,MAAU,IAAJ6C,GAAS,QAXdlB,wEAiBlB,IAAIzF,EAAKjC,KAAK8B,KAAKG,IAAM,GACzBjC,KAAKmN,SAAS,CACb2C,UAAU,EACVC,GAAI,WAAa9N,0CAIL,IAAA4H,EAAA7J,KACTA,KAAKoQ,UAELpQ,KAAKgL,MAAM0B,SACd1M,KAAKmN,SAAS,CAAE6C,QAAS,WAAYtD,SAAS,IAC9C1M,KAAK8B,KAAK2L,SAELzN,KAAK8B,KAAKgF,QAed9G,KAAKmN,SAAS,CAAE6C,QAAS,YAAatD,SAAS,IAC/C1M,KAAK8B,KAAK4L,SAfV1N,KAAKoQ,SAAU,EACftG,EAAU/G,QAAQ/C,KAAK8B,KAAKG,GAAI,eAC9BzB,KAAK,SAAC8D,GACN,OAAOzF,KAAKC,MAAMwF,KAElB9D,KAAK,SAAC0M,GACNrD,EAAK/H,KAAKmL,KAAKC,GACfrD,EAAKuG,SAAU,EACfvG,EAAKwG,gBAEL5P,MAAM,iDASF,IAAAmN,EAAA5N,KACR,OAAIA,KAAKgL,MAAM8E,SACPxE,EAAAC,EAAAC,cAAC8E,EAAA,EAAD,CAAUP,GAAI/P,KAAKgL,MAAM+E,KAGhCzE,EAAAC,EAAAC,cAAA,UACCF,EAAAC,EAAAC,cAAA,OAAKc,UAAU,cAAcgC,MAAO,CAACiC,WAAY,cAChDjF,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,UAAQe,QAAS,kBAAMqB,EAAKyC,eAAe/D,UAAW,8BAAgCtM,KAAKgL,MAAMgF,UACjG1E,EAAAC,EAAAC,cAAA,OAAKc,UAAU,cAActM,KAAK8B,KAAKN,OAExC8J,EAAAC,EAAAC,cAAA,WACE1B,EAAU1G,kBAAoB0G,EAAU1G,iBAAiB/B,WAAarB,KAAK8B,KAAKT,UACjFiK,EAAAC,EAAAC,cAAA,OAAKc,UAAU,qBACdhB,EAAAC,EAAAC,cAAA,UAAQe,QAAS,kBAAKqB,EAAK4C,UAAUlE,UAAU,iBAAgBhB,EAAAC,EAAAC,cAAA,KAAGc,UAAU,kBAC5EhB,EAAAC,EAAAC,cAAA,UAAQc,UAAU,iBAAgBhB,EAAAC,EAAAC,cAAA,KAAGc,UAAU,kBAGhDhB,EAAAC,EAAAC,cAAA,KAAGiF,KAAMC,EAAUnS,UAAU,WAAWyB,KAAK8B,KAAKT,SAAUiL,UAAU,eACrEhB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,QAAQtM,KAAK8B,KAAK6E,QACjC2E,EAAAC,EAAAC,cAAA,OAAKc,UAAU,YAAf,IAA4BtM,KAAK8B,KAAKT,YAGxCiK,EAAAC,EAAAC,cAAA,OAAKc,UAAU,gBAAgBgC,MAAO,CAACqC,MAAO3Q,KAAKgL,MAAMmF,aAE1D7E,EAAAC,EAAAC,cAAA,OAAKc,UAAU,aACdhB,EAAAC,EAAAC,cAACoF,EAAD,CAAY9O,KAAM9B,KAAK8B,KAAMwN,YAAY,EAAM1K,MAAO,MACtD0G,EAAAC,EAAAC,cAAA,OAAKc,UAAU,cACdhB,EAAAC,EAAAC,cAAA,QAAMc,UAAU,sBAAhB,WAA8CtM,KAAK8B,KAAK+O,sBACxDvF,EAAAC,EAAAC,cAAA,QAAMc,UAAU,oBACftM,KAAK8B,KAAKgP,iBAAmB,WAAa9Q,KAAK8B,KAAKiP,qBAAuB,cAlFzDjG,aC6IVkG,cA7Id,SAAAA,EAAYjG,GAAO,IAAArD,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAxD,KAAAgR,IAClBtJ,EAAAlE,OAAAiH,EAAA,EAAAjH,CAAAxD,KAAAwD,OAAAkH,EAAA,EAAAlH,CAAAwN,GAAArG,KAAA3K,KAAM+K,KACDvM,MAAQ,GAebkJ,EAAKsD,MAAQ,CACZoF,SAAS,GAEV1I,EAAKuJ,WApBavJ,0EAuBlB,IAAI1H,KAAKgL,MAAMoF,QAAf,CAEApQ,KAAKmN,SAAS,CAACiD,SAAS,IACxB,IAAI5R,EAAQ,CACX,CACCgD,KAAM,aACN+E,IAAK,MACLC,YAAa,IACbC,WAAY,6BACZC,WAAY,6BACZvF,KAAM,CACLK,KAAM,SACNH,SAAU,WAEXuF,QAAS,EACT3E,GAAI,GAEL,CACCT,KAAM,kBACN+E,IAAK,KACLC,YAAa,IACbC,WAAY,6BACZC,WAAY,6BACZvF,KAAM,CACLK,KAAM,SACNH,SAAU,WAEXuF,QAAS,EACT3E,GAAI,GAEL,CACCT,KAAM,WACN+E,IAAK,KACLC,YAAa,IACbC,WAAY,6BACZC,WAAY,6BACZvF,KAAM,CACLK,KAAM,OACNH,SAAU,eAEXuF,QAAS,EACT3E,GAAI,GAEL,CACCT,KAAM,OACN+E,IAAK,KACLC,YAAa,IACbC,WAAY,6BACZC,WAAY,6BACZvF,KAAM,CACLK,KAAM,SACNH,SAAU,SAEXuF,QAAS,EACT3E,GAAI,GAEL,CACCT,KAAM,eACN+E,IAAK,KACLC,YAAa,IACbC,WAAY,6BACZC,WAAY,6BACZvF,KAAM,CACLK,KAAM,SACNH,SAAU,WAEXuF,QAAS,EACT3E,GAAI,GAEL,CACCT,KAAM,SACN+E,IAAK,KACLC,YAAa,IACbC,WAAY,6BACZC,WAAY,6BACZvF,KAAM,CACLK,KAAM,SACNH,SAAU,WAEXuF,QAAS,EACT3E,GAAI,IAIJ,IAAK,IAAMuC,KADXxE,KAAK0C,YAAc,KACHlE,EAAO,CACtB,IAAM2D,EAAW3D,EAAMgG,GACnBrC,EAAS+O,eAAe,eAC3BlR,KAAK0C,YAAcP,EAASO,YAE5B1C,KAAKxB,MAAMqG,KAAKyG,EAAAC,EAAAC,cAAC2F,EAAD,CAAYrP,KAAM,IAAIsE,EAAKjE,MAG7CnC,KAAKmN,SAAS,CAACiD,SAAS,EAAOtJ,QAAQ,sCAGzC,OACCwE,EAAAC,EAAAC,cAAA,WACwB,IAAtBxL,KAAKxB,MAAMa,QAAgBW,KAAKgL,MAAMlE,OACtCwE,EAAAC,EAAAC,cAAA,KAAGc,UAAU,eAAb,+CAEAhB,EAAAC,EAAAC,cAAA,MAAIc,UAAU,aACZtM,KAAKxB,QAGNwB,KAAKgL,MAAMoF,SAAWpQ,KAAK0C,cAC7B4I,EAAAC,EAAAC,cAAA,OAAKc,UAAU,oBACZtM,KAAK0C,YAGN4I,EAAAC,EAAAC,cAAA,UAAQc,UAAU,8BAA8ByC,SAAU/O,KAAKgL,MAAMoF,QAAS7D,QAASvM,KAAKiR,SAASxH,KAAKzJ,OAAQA,KAAKgL,MAAMoF,QAAU,aAAe,aAFtJ9E,EAAAC,EAAAC,cAAA,OAAKc,UAAU,WAAf,uBAnIiBxB,qBCwERsG,cAtEd,SAAAA,EAAYrG,GAAO,IAAArD,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAxD,KAAAoR,IAClB1J,EAAAlE,OAAAiH,EAAA,EAAAjH,CAAAxD,KAAAwD,OAAAkH,EAAA,EAAAlH,CAAA4N,GAAAzG,KAAA3K,KAAM+K,KACDsG,OAAS,CACbC,gBAAiB,OAAShT,EAASC,UAAY,sBAEhDmJ,EAAK6J,OAAS,CACbD,gBAAiB,OAAShT,EAASC,UAAY,sBAEhDmJ,EAAK8J,OAAS,CACbF,gBAAiB,OAAShT,EAASC,UAAY,sBAT9BmJ,wEAclB,OACC4D,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,cACCF,EAAAC,EAAAC,cAAA,OAAKvJ,GAAG,4BAA4BqK,UAAU,iBAAiBmF,YAAU,YACxEnG,EAAAC,EAAAC,cAAA,MAAIc,UAAU,uBACbhB,EAAAC,EAAAC,cAAA,MAAIkG,cAAY,6BAA6BC,gBAAc,IAAIrF,UAAU,WACzEhB,EAAAC,EAAAC,cAAA,MAAIkG,cAAY,6BAA6BC,gBAAc,MAC3DrG,EAAAC,EAAAC,cAAA,MAAIkG,cAAY,6BAA6BC,gBAAc,OAE5DrG,EAAAC,EAAAC,cAAA,OAAKc,UAAU,iBAAiBsF,KAAK,WACpCtG,EAAAC,EAAAC,cAAA,OAAKc,UAAU,uBAAuBgC,MAAOtO,KAAKqR,QACjD/F,EAAAC,EAAAC,cAAA,OAAKC,MAAM,SACVH,EAAAC,EAAAC,cAAA,MAAIC,MAAM,aAAV,wCAGFH,EAAAC,EAAAC,cAAA,OAAKc,UAAU,gBAAgBgC,MAAOtO,KAAKuR,QAC1CjG,EAAAC,EAAAC,cAAA,OAAKC,MAAM,SACVH,EAAAC,EAAAC,cAAA,MAAIC,MAAM,aAAV,mCAGFH,EAAAC,EAAAC,cAAA,OAAKc,UAAU,gBAAgBgC,MAAOtO,KAAKwR,QAC1ClG,EAAAC,EAAAC,cAAA,OAAKC,MAAM,SACVH,EAAAC,EAAAC,cAAA,MAAIC,MAAM,aAAV,gDAIHH,EAAAC,EAAAC,cAAA,KAAGc,UAAU,wBAAwBmE,KAAK,6BAA6BmB,KAAK,SAASC,aAAW,QAC/FvG,EAAAC,EAAAC,cAAA,QAAMc,UAAU,6BAA6BwF,cAAY,SACzDxG,EAAAC,EAAAC,cAAA,QAAMc,UAAU,WAAhB,aAEDhB,EAAAC,EAAAC,cAAA,KAAGc,UAAU,wBAAwBmE,KAAK,6BAA6BmB,KAAK,SAASC,aAAW,QAC/FvG,EAAAC,EAAAC,cAAA,QAAMc,UAAU,6BAA6BwF,cAAY,SACzDxG,EAAAC,EAAAC,cAAA,QAAMc,UAAU,WAAhB,WAIHhB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,qBACdhB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,OACdhB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,qBACdhB,EAAAC,EAAAC,cAAA,2BACAF,EAAAC,EAAAC,cAACuG,EAAD,CAAUtP,SAAS,KAEpB6I,EAAAC,EAAAC,cAAA,OAAKc,UAAU,qBACdhB,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,qFAA4EF,EAAAC,EAAAC,cAAA,KAAGiF,KAAK,wBAAR,SAA5E,qCAAsJnF,EAAAC,EAAAC,cAAA,KAAGiF,KAAK,0BAAR,WAAtJ,sBACAnF,EAAAC,EAAAC,cAAA,0IACAF,EAAAC,EAAAC,cAAA,yBACAF,EAAAC,EAAAC,cAAA,qFAA4EF,EAAAC,EAAAC,cAACwG,EAAA,EAAD,CAAMjC,GAAI,aAAV,qBAA5E,iEA/DYjF,aC2FJmH,cA1Fd,SAAAA,EAAYlH,GAAO,IAAArD,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAxD,KAAAiS,IAClBvK,EAAAlE,OAAAiH,EAAA,EAAAjH,CAAAxD,KAAAwD,OAAAkH,EAAA,EAAAlH,CAAAyO,GAAAtH,KAAA3K,KAAM+K,KACDC,MAAQ,CACZkH,YAAa,GACbvF,MAAO,KACPmD,SAAU,MALOpI,wEAQVwD,GAER,GADAA,EAAM2C,iBACkC,IAApC7N,KAAKmS,KAAK9Q,SAASuD,MAAMvF,QAAoD,IAApCW,KAAKmS,KAAK7Q,SAASsD,MAAMvF,OAAtE,CAUA,IAAMa,EAAU4J,EAAU5I,MAAMlB,KAAKmS,KAAK9Q,SAASuD,MAAO5E,KAAKmS,KAAK7Q,SAASsD,OAC7E,OAAQ1E,EAAQD,QACf,KAAK,IACJD,KAAKmN,SAAS,CACb2C,SAAUY,EAAUnS,UAAU,WAAWyB,KAAKmS,KAAK9Q,SAASuD,MAAMnD,gBAEnE,MACD,KAAK,IACJ,IAAIyQ,EAAc,KAClB,IACCA,EAAcrT,KAAKC,MAAMoB,EAAQnB,UAAUmT,YAC1C,MAAO7O,IACTrD,KAAKmN,SAAS,CACbR,MAAO,KACPuF,YAAaA,IAEd,MACD,QACC,IAAIE,EAAU,0BACd,IACCA,EAAUvT,KAAKC,MAAMoB,EAAQnB,UAAUqT,QACtC,MAAO/O,IACTrD,KAAKmN,SAAS,CACbR,MAAOyF,EAAQC,OAAO,GAAGC,cAAcF,EAAQG,UAAU,GAAG,IAC5DL,YAAa,WAjCflS,KAAKmN,SAAS,CACbqF,OAAQ,KACRN,YAAa,CACZ7Q,SAA8C,IAApCrB,KAAKmS,KAAK9Q,SAASuD,MAAMvF,OAAe,0BAA4B,KAC9EiC,SAA8C,IAApCtB,KAAKmS,KAAK7Q,SAASsD,MAAMvF,OAAe,0BAA4B,0CAiCxEoT,GACT,IAAMP,EAAclS,KAAKgL,MAAMkH,mBACxBA,EAAYO,GACnBzS,KAAKmN,SAAS,CACb+E,YAAaA,qCAGN,IAAArI,EAAA7J,KACR,OAAOA,KAAKgL,MAAM8E,SAAWxE,EAAAC,EAAAC,cAAC8E,EAAA,EAAD,CAAUP,GAAI/P,KAAKgL,MAAM8E,WAErDxE,EAAAC,EAAAC,cAAA,OAAKc,UAAU,aACdhB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,OACdhB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,6DACdhB,EAAAC,EAAAC,cAAA,QAAMkD,SAAU,SAACf,GAAD,OAAS9D,EAAK6E,SAASf,IAAMrB,UAAU,cACtDhB,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,OAAKc,UAAU,cACdhB,EAAAC,EAAAC,cAAA,SAAOkH,IAAI,WAAWjE,SAAU,kBAAM5E,EAAKmB,MAAMkH,YAAY7Q,SAAWwI,EAAK8I,UAAU,YAAc,IAAI7N,KAAK,OAAOwH,UAAW,gBAAgBtM,KAAKgL,MAAMkH,YAAY7Q,SAAW,cAAgB,IAAKwN,YAAY,aACnNvD,EAAAC,EAAAC,cAAA,OAAKc,UAAU,oBAAoBtM,KAAKgL,MAAMkH,YAAY7Q,UAAY,KAEvEiK,EAAAC,EAAAC,cAAA,OAAKc,UAAU,cACdhB,EAAAC,EAAAC,cAAA,SAAOkH,IAAI,WAAWjE,SAAU,kBAAM5E,EAAKmB,MAAMkH,YAAY5Q,SAAWuI,EAAK8I,UAAU,YAAc,IAAI7N,KAAK,WAAWwH,UAAW,gBAAgBtM,KAAKgL,MAAMkH,YAAY5Q,SAAW,cAAgB,IAAKuN,YAAY,aACvNvD,EAAAC,EAAAC,cAAA,OAAKc,UAAU,oBAAoBtM,KAAKgL,MAAMkH,YAAY5Q,UAAY,KAEvEgK,EAAAC,EAAAC,cAAA,OAAKc,UAAU,cACbtM,KAAKgL,MAAM2B,OACZrB,EAAAC,EAAAC,cAAA,OAAK8C,MAAO,CAACsE,OAAU,gBAAgBtH,EAAAC,EAAAC,cAAA,SAAOc,UAAU,gBAAgBtM,KAAKgL,MAAM2B,QAEnFrB,EAAAC,EAAAC,cAAA,UAAQc,UAAU,kBAAkBxH,KAAK,UAAzC,WAGFwG,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKc,UAAU,mBACdhB,EAAAC,EAAAC,cAAA,oCACAF,EAAAC,EAAAC,cAACwG,EAAA,EAAD,CAAMjC,GAAG,aAAT,4BAlFajF,aCWL+H,qLAZb,OAAO7S,KAAKmS,KAAKM,MAAM7N,uCAEf,IAAA8C,EAAA1H,KACR,OACCsL,EAAAC,EAAAC,cAAA,OAAKc,UAAU,cACdhB,EAAAC,EAAAC,cAAA,SAAOkH,IAAI,QAAQlR,KAAMxB,KAAK+K,MAAMvJ,KAAMiN,SAAU,kBAAM/G,EAAKqD,MAAMmH,YAAYxK,EAAKqD,MAAMvJ,MAAQkG,EAAKqD,MAAM4H,UAAUjL,EAAKqD,MAAMvJ,MAAQ,IAAIsD,KAAM9E,KAAK+K,MAAMjG,MAAQ,OAAQwH,UAAW,gBAAgBtM,KAAK+K,MAAMmH,YAAYlS,KAAK+K,MAAMvJ,MAAQ,cAAgB,IAAKqN,YAAa7O,KAAK+K,MAAM8D,aAAe,KAClTvD,EAAAC,EAAAC,cAAA,OAAKc,UAAU,oBAAoBtM,KAAK+K,MAAMmH,YAAYlS,KAAK+K,MAAMvJ,OAAS,YAR1DsJ,aC0HTgI,cArHd,SAAAA,EAAY/H,GAAO,IAAArD,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAxD,KAAA8S,IAClBpL,EAAAlE,OAAAiH,EAAA,EAAAjH,CAAAxD,KAAAwD,OAAAkH,EAAA,EAAAlH,CAAAsP,GAAAnI,KAAA3K,KAAM+K,KACDC,MAAQ,CACZkH,YAAa,GACbvF,MAAO,KACPmD,SAAU,KACV/O,QAAS,MAEV+I,EAAUvJ,aACRC,KAAK,SAACzB,GACN2I,EAAK7G,WAAa9B,EAASgC,QAAQE,IAEnCyG,EAAKyF,SAAS,CACbpM,QAASuK,EAAAC,EAAAC,cAAA,OAAKuH,wBAAyB,CAACC,OAAQjU,EAASgC,QAAQkS,aAGlExS,MAAM,WACNiH,EAAKyF,SAAS,CACbpM,QAAS,sBAlBM2G,wEAsBVwD,GAER,GADAA,EAAM2C,mBACF7N,KAAKkT,uBAAyB1P,OAAO2F,KAAKnJ,KAAKgL,MAAMkH,aAAa7S,OAAS,GAA/E,CAEA,IAAMuB,EAAY,CACjBY,KAAMxB,KAAKmS,KAAK3Q,KAAK2R,WACrB9R,SAAUrB,KAAKmS,KAAK9Q,SAAS8R,WAC7B7R,SAAUtB,KAAKmS,KAAK7Q,SAAS6R,WAC7BpS,QAASf,KAAKmS,KAAKpR,QAAQoS,YAExBC,GAAc,EAClB,IAAK,IAAMnS,KAAOL,EACa,IAA1BA,EAAUK,GAAK5B,SAClBW,KAAKgL,MAAMkH,YAAYjR,GAAO,0BAC9BjB,KAAKqL,cACL+H,GAAc,GAQhB,GALIpT,KAAKmS,KAAK,mBAAmBgB,aAAenT,KAAKmS,KAAK7Q,SAAS6R,aAClEnT,KAAKgL,MAAMkH,YAAY,mBAAqB,0BAC5ClS,KAAKqL,cACL+H,GAAc,IAEXA,EAAJ,CAEA,IAAMlT,EAAU4J,EAAUnJ,SAASC,EAAWZ,KAAKa,YACnD,OAAQX,EAAQD,QACf,KAAK,IACJ,IAAMoT,EAAevJ,EAAU5I,MAAMN,EAAUS,SAAUT,EAAUU,UACnEtB,KAAKmN,SAAS,CACb2C,SAAkC,MAAxBuD,EAAapT,OAAiByQ,EAAUnS,UAAU,WAAWqC,EAAUS,SAASI,cAAgBiP,EAAUnS,UAAU,UAE/H,MACD,KAAK,IACJ,IAAI2T,EAAc,KAClB,IACC,IAAMjI,EAAOpL,KAAKC,MAAMoB,EAAQnB,UAChCmT,EAAcjI,EAAKiI,aAAe,GAC9BjI,EAAKqJ,eACRpB,EAAYnR,QAAUkJ,EAAKqJ,cAC3B,MAAOjQ,IACTrD,KAAKmN,SAAS,CACbR,MAAO,KACPuF,YAAaA,IAEdlS,KAAKkT,uBAAwB,EAC7B,MACD,QACC,IAAId,EAAU,0BACd,IACCA,EAAUvT,KAAKC,MAAMoB,EAAQnB,UAAUqT,QACtC,MAAO/O,IACTrD,KAAKmN,SAAS,CACbR,MAAOyF,EAAQC,OAAO,GAAGC,cAAcF,EAAQG,UAAU,GAAG,IAC5DL,YAAa,0CAIPO,GACT,IAAMP,EAAclS,KAAKgL,MAAMkH,mBACxBA,EAAYO,GACnBzS,KAAKmN,SAAS,CACb+E,YAAaA,qCAGN,IAAArI,EAAA7J,KACR,OAAOA,KAAKgL,MAAM8E,SAAWxE,EAAAC,EAAAC,cAAC8E,EAAA,EAAD,CAAUP,GAAI/P,KAAKgL,MAAM8E,WAErDxE,EAAAC,EAAAC,cAAA,OAAKc,UAAU,aACdhB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,OACdhB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,6DACdhB,EAAAC,EAAAC,cAAA,QAAMkD,SAAU,SAACf,GAAD,OAAS9D,EAAK6E,SAASf,IAAMrB,UAAU,cACtDhB,EAAAC,EAAAC,cAAA,sBACAF,EAAAC,EAAAC,cAAC+H,EAAD,CAAWb,IAAI,OAAOlR,KAAK,OAAOqN,YAAY,OAAOqD,YAAalS,KAAKgL,MAAMkH,YAAaS,UAAW3S,KAAK2S,UAAUlJ,KAAKzJ,QACzHsL,EAAAC,EAAAC,cAAC+H,EAAD,CAAWb,IAAI,WAAWlR,KAAK,WAAWqN,YAAY,WAAWqD,YAAalS,KAAKgL,MAAMkH,YAAaS,UAAW3S,KAAK2S,UAAUlJ,KAAKzJ,QACrIsL,EAAAC,EAAAC,cAAC+H,EAAD,CAAWb,IAAI,WAAWlR,KAAK,WAAWsD,KAAK,WAAW+J,YAAY,WAAWqD,YAAalS,KAAKgL,MAAMkH,YAAaS,UAAW3S,KAAK2S,UAAUlJ,KAAKzJ,QACrJsL,EAAAC,EAAAC,cAAC+H,EAAD,CAAWb,IAAI,kBAAkBlR,KAAK,kBAAkBsD,KAAK,WAAW+J,YAAY,kBAAkBqD,YAAalS,KAAKgL,MAAMkH,YAAaS,UAAW3S,KAAK2S,UAAUlJ,KAAKzJ,QAC1KsL,EAAAC,EAAAC,cAAA,OAAKc,UAAU,iBACdhB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,qBAAqBtM,KAAKgL,MAAMjK,SAAW,sBAC1DuK,EAAAC,EAAAC,cAAC+H,EAAD,CAAWb,IAAI,UAAUlR,KAAK,UAAUqN,YAAY,iBAAiBqD,YAAalS,KAAKgL,MAAMkH,YAAaS,UAAW3S,KAAK2S,UAAUlJ,KAAKzJ,SAE1IsL,EAAAC,EAAAC,cAAA,UAAQc,UAAU,kBAAkBxH,KAAK,UAAzC,aAEDwG,EAAAC,EAAAC,cAAA,WACAF,EAAAC,EAAAC,cAAA,OAAKc,UAAU,mBACdhB,EAAAC,EAAAC,cAAA,sCACAF,EAAAC,EAAAC,cAACwG,EAAA,EAAD,CAAMjC,GAAG,UAAT,yBA7GgBjF,aC4DR0I,cA7Dd,SAAAA,EAAYzI,GAAO,IAAArD,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAxD,KAAAwT,IAClB9L,EAAAlE,OAAAiH,EAAA,EAAAjH,CAAAxD,KAAAwD,OAAAkH,EAAA,EAAAlH,CAAAgQ,GAAA7I,KAAA3K,KAAM+K,KACDC,MAAQ,CACZoF,SAAS,GAEN1I,EAAKqD,MAAMiC,OAAStF,EAAKqD,MAAMiC,MAAMrK,QAAU+E,EAAKqD,MAAMiC,MAAMrK,OAAOtB,SAC1EyI,EAAU5G,UAAUwE,EAAKqD,MAAMiC,MAAMrK,OAAOtB,UAC1Cb,KAAK,SAAAW,GACLuG,EAAKyF,SAAS,CACbiD,SAAS,EACTjP,KAAMA,MAGPV,MAAM,SAAAC,GACa,MAAfA,EAAIT,QACPyH,EAAKyF,SAAS,CACbiD,SAAS,EACTjP,KAAM,UAOVuG,EAAKsD,MAAMoF,SAAU,EACrB1I,EAAKsD,MAAM7J,KAAO,MAzBDuG,wEA6BlB,OAAI1H,KAAKgL,MAAMoF,QAEb9E,EAAAC,EAAAC,cAAA,OAAKc,UAAU,YACdhB,EAAAC,EAAAC,cAAA,wBAKDF,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,OAAKc,UAAU,aACdhB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,OACdhB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,+BACZtM,KAAKgL,MAAM7J,KAMZmK,EAAAC,EAAAC,cAAA,WACCF,EAAAC,EAAAC,cAAA,MAAIc,UAAU,gBAAgBtM,KAAKgL,MAAM7J,KAAKK,MAC9C8J,EAAAC,EAAAC,cAAA,QAAMc,UAAU,oBAAhB,IAAqCtM,KAAKgL,MAAM7J,KAAKE,UACrDiK,EAAAC,EAAAC,cAACuG,EAAD,CAAUzP,OAAQtC,KAAKgL,MAAM7J,KAAKc,MARnCqJ,EAAAC,EAAAC,cAAA,OAAKc,UAAU,YACdhB,EAAAC,EAAAC,cAAA,4BACAF,EAAAC,EAAAC,cAAA,0DA7CYV,aCgBP2I,mLAfb,OACCnI,EAAAC,EAAAC,cAAA,MAAIc,UAAU,WAAWC,QAASvM,KAAK0T,YACtCpI,EAAAC,EAAAC,cAAA,KAAGiF,KAAK,IAAInE,UAAW,2BAA4BqH,cAAY,YAC7D3T,KAAK+K,MAAM6I,KAAKC,OAElBvI,EAAAC,EAAAC,cAAA,OAAKc,UAAW,iBACdtM,KAAK+K,MAAM6I,KAAKE,MAAM3J,IAAI,SAAC4J,GAC3B,OAAOzI,EAAAC,EAAAC,cAAA,KAAGc,UAAU,gBAAgBmE,KAAMnS,EAASC,UAAUwV,EAASC,MAAOD,EAASF,kBATjE/I,aCSZmJ,mLAJb,OADAnK,EAAUlI,SACH0J,EAAAC,EAAAC,cAAC8E,EAAA,EAAD,CAAUP,GAAIW,EAAUnS,mBAHZuM,aC8ENoJ,cArEd,SAAAA,EAAYnJ,GAAO,IAAArD,EAAA,OAAAlE,OAAAC,EAAA,EAAAD,CAAAxD,KAAAkU,IAClBxM,EAAAlE,OAAAiH,EAAA,EAAAjH,CAAAxD,KAAAwD,OAAAkH,EAAA,EAAAlH,CAAA0Q,GAAAvJ,KAAA3K,KAAM+K,KACD5J,KAAO2I,EAAU1G,iBACtBsE,EAAKyM,KAAO,CACX,CAAEN,MAAO,SAAUG,KAAM,KACzB,CAAEH,MAAO,SAAUG,KAAM,eACzB,CAAEH,MAAO,WAAYG,KAAM,aAAatM,EAAKvG,KAAOuG,EAAKvG,KAAKE,SAAW,IAAK+S,UAAU,IANvE1M,wEAWV,IAAAmC,EAAA7J,KACJqU,EAAcrU,KAAKmU,KAAKhK,IAAI,SAACmK,GAChC,IAAIA,EAASF,UAAavK,EAAK1I,KAE5B,OAAOmT,EAASR,MAAQxI,EAAAC,EAAAC,cAAC+I,EAAD,CAAcX,KAAMU,IAAehJ,EAAAC,EAAAC,cAAA,MAAIc,UAAW,YAAYgI,EAASR,MAAQ,YAAc,KACpHxI,EAAAC,EAAAC,cAAA,KAAGiF,KAAM6D,EAASN,KAAM1H,UAAW,aAAakI,OAAOC,SAASC,WAAaJ,EAASN,KAAO,SAAW,KACtGM,EAAST,UAoBhB,OACCvI,EAAAC,EAAAC,cAAA,OAAKc,UAAU,OACdhB,EAAAC,EAAAC,cAACmJ,EAAA,EAAD,CAAQC,SAAUtW,EAASC,WACvB+M,EAAAC,EAAAC,cAAA,WACFF,EAAAC,EAAAC,cAAA,OAAKc,UAAU,yDACdhB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,aACdhB,EAAAC,EAAAC,cAAA,KAAGc,UAAU,eAAemE,KAAMnS,EAASC,WAA3C,cACA+M,EAAAC,EAAAC,cAAA,UAAQc,UAAU,iBAAiBxH,KAAK,SAAS6O,cAAY,WAAWjC,cAAY,oBAAoBmD,gBAAc,mBAAmBC,gBAAc,QAAQC,aAAW,qBACzKzJ,EAAAC,EAAAC,cAAA,QAAMc,UAAU,yBAEjBhB,EAAAC,EAAAC,cAAA,OAAKc,UAAU,2BAA2BrK,GAAG,oBAC5CqJ,EAAAC,EAAAC,cAAA,MAAIc,UAAU,sBACZ+H,GAEF/I,EAAAC,EAAAC,cAACwJ,EAAA,EAAD,CAAOhB,KAAK,IAAIiB,UA9BN,WACb,IAAM9T,EAAO2I,EAAU1G,iBACvB,OAAOkI,EAAAC,EAAAC,cAAA,MAAIc,UAAU,sBACtBnL,EAGDmK,EAAAC,EAAAC,cAAA,MAAIc,UAAU,qBACdhB,EAAAC,EAAAC,cAAA,KAAGc,UAAU,2BAA2BmE,KAAK,IAAIxO,GAAG,iBAAiB2P,KAAK,SAAS+B,cAAY,WAAWuB,gBAAc,OAAOJ,gBAAc,SAA7I,iBACgB3T,EAAKK,MAErB8J,EAAAC,EAAAC,cAAA,OAAKc,UAAU,gBAAgB6I,kBAAgB,kBAC9C7J,EAAAC,EAAAC,cAAA,KAAGc,UAAU,gBAAgBmE,KAAMnS,EAASC,UAAY,UAAxD,aAPD+M,EAAAC,EAAAC,cAAA,KAAGc,UAAU,WAAWmE,KAAMnS,EAASC,UAAY,SAAnD,4BA8BE+M,EAAAC,EAAAC,cAACwJ,EAAA,EAAD,CAAOhB,KAAK,IAAIoB,OAAK,EAACH,UAAW7D,IACjC9F,EAAAC,EAAAC,cAACwJ,EAAA,EAAD,CAAOhB,KAAK,UAAUiB,UAAWxI,IACjCnB,EAAAC,EAAAC,cAACwJ,EAAA,EAAD,CAAOhB,KAAK,cAAciB,UAAWxI,IACrCnB,EAAAC,EAAAC,cAACwJ,EAAA,EAAD,CAAOhB,KAAK,SAASiB,UAAWhD,IAChC3G,EAAAC,EAAAC,cAACwJ,EAAA,EAAD,CAAOhB,KAAK,YAAYiB,UAAWnC,IACnCxH,EAAAC,EAAAC,cAACwJ,EAAA,EAAD,CAAOhB,KAAK,sBAAsBiB,UAAWzB,IAC1ClI,EAAAC,EAAAC,cAACwJ,EAAA,EAAD,CAAOhB,KAAK,UAAUiB,UAAWhB,cA/DxBnJ,aCAEuK,QACW,cAA7Bb,OAAOC,SAASa,UAEe,UAA7Bd,OAAOC,SAASa,UAEhBd,OAAOC,SAASa,SAAStI,MACvB,2DCZNuI,IAASC,OAAOlK,EAAAC,EAAAC,cAACiK,EAAD,MAASC,SAASC,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAAc/I,MAAMtM,KAAK,SAAAsV,GACjCA,EAAaC","file":"static/js/main.0e568c1a.chunk.js","sourcesContent":["const constant = {\r\n    ROOT_PATH: \"/\" \r\n}\r\n\r\nexport default constant;\r\n","import * as Cookies from 'js-cookie';\r\nimport constant from './constants.js';\r\n\r\nconst in30Minutes = 1/48;\r\n\r\nconst songs = [\r\n\t`{\"instruments\":[{\"blocks\":[1],\"settings\":{\"typeId\":1,\"metadata\":\"123ab\"}}],\"blocks\":{\"1\":{\"data\":[[2,3,0,0,0,0,0,0,2,3,0,0,2,3,0,0],[0,2,3,0,2,3,2,3,0,0,0,2,3,2,3,0],[0,0,2,3,0,2,3,0,0,2,3,0,0,0,2,3],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,2,0,0,3,0,0,0,0,0,0,2,3],[2,0,0,3,0,0,0,0,2,3,0,0,0,0,0,0],[0,0,0,0,1,0,1,0,0,0,2,0,0,3,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,1,0,1,1,1,0,1,0,1,0,1,1,1,0]]}},\"id\":\"5bf779e1e0e4bb523109e322\"}`,\r\n\t`{\"instruments\":[{\"blocks\":[1],\"settings\":{\"typeId\":1,\"metadata\":\"123ab\"}}],\"blocks\":{\"1\":{\"data\":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,2,3,0,0,0],[0,0,0,0,0,0,0,0,0,2,3,0,0,0,0,0],[2,3,0,0,0,2,3,0,0,0,0,0,2,3,0,0],[0,0,2,3,0,0,2,3,0,1,0,0,0,0,0,0],[0,0,0,0,1,0,0,2,3,0,0,2,3,2,3,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[2,3,0,0,0,2,3,0,0,0,2,3,0,0,2,3],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,1,0,1,0,0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0]]}},\"id\":\"5bf597219972bb0a043f1cb6\"}`,\r\n\t`{\"instruments\":[{\"blocks\":[1],\"settings\":{\"typeId\":1,\"metadata\":\"123ab\"}}],\"blocks\":{\"1\":{\"data\":[[0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0],[0,0,0,1,0,0,0,1,0,1,1,0,1,1,0,1],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0],[0,0,0,0,1,0,0,0,0,0,0,2,0,0,0,3],[1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,2,0,0,0,3,0,0,0,0],[2,0,0,0,3,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,3]]}},\"id\":\"5c01d97919bdb004cbc04d2c\"}`,\r\n\t`{\"name\":\"demo\",\"bpm\":\"85\",\"blockLength\":1,\"instruments\":[{\"blocks\":[1],\"settings\":{\"typeId\":1,\"metadata\":\"123ab\"}}],\"blocks\":{\"1\":{\"data\":[[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,1,0,0,0,1,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0],[0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0],[0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1],[0,0,0,0,0,1,0,0,1,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]]}}}`,\r\n\t`{\"instruments\":[{\"blocks\":[1],\"settings\":{\"typeId\":1,\"metadata\":\"123ab\"}}],\"blocks\":{\"1\":{\"data\":[[1,0,0,0,1,0,0,0,0,0,1,0,0,1,0,0],[0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,0],[0,1,0,0,1,0,1,0,1,0,1,0,0,0,2,3],[0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,2,3,2,3,0],[0,0,0,0,2,0,0,3,0,0,2,3,2,3,0,0],[2,3,2,3,0,0,0,0,0,2,3,0,0,0,2,3],[0,0,0,0,2,0,3,2,0,3,0,0,0,0,0,0],[0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0],[0,0,0,0,2,0,0,1,3,0,0,0,2,0,0,3],[2,0,0,1,3,0,0,0,2,0,0,1,3,0,0,0]]}},\"id\":\"5bfe21d4c789c1108bdcfcc6\"}`,\r\n\t`{\"instruments\":[{\"blocks\":[1],\"settings\":{\"typeId\":1,\"metadata\":\"123ab\"}}],\"blocks\":{\"1\":{\"data\":[[1,0,1,0,0,0,1,0,1,0,1,1,0,0,1,0],[0,0,0,0,1,1,0,0,0,0,0,0,0,1,0,0],[0,0,0,0,0,0,0,0,2,0,0,3,0,0,0,0],[0,0,0,0,2,3,0,0,0,0,0,0,0,0,0,0],[2,3,0,0,0,0,2,3,2,0,0,3,2,0,0,3],[0,0,2,3,2,3,0,0,0,0,0,0,0,0,0,0],[2,3,0,0,0,0,2,3,0,0,0,0,2,0,0,3],[0,0,2,3,0,0,0,0,0,0,1,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,0,1,0,0,0,1,0,0,0,1,0,0,0,1,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[1,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0]]}},\"id\":\"5bfdc62ec789c1108bdcfcc4\"}`,\r\n]\r\n\r\n\r\n\r\nconst getResponse = (xhr) => {\r\n\tconst contentType = xhr.getResponseHeader(\"Content-Type\");\r\n\tif (contentType.includes(\"application/json\")) {\r\n\t\treturn JSON.parse(xhr.response);\r\n\t} else {\r\n\t\treturn xhr.response;\r\n\t}\r\n};\r\nconst makeApiRequest = (method, route, body = null) => {\r\n\treturn new Promise(function (resolve, reject) {\r\n\t\tlet xhr = new XMLHttpRequest();\r\n\t\txhr.open(method, constant.ROOT_PATH + \"api/\" + route);\r\n\t\tconst token = Cookies.get('token');\r\n\t\tif (token)\r\n\t\t\txhr.setRequestHeader(\"Authorization\", token);\r\n\t\txhr.onload = function () {\r\n\t\t\tif (this.status >= 200 && this.status < 300) {\r\n\t\t\t\tresolve(xhr);\r\n\t\t\t} else {\r\n\t\t\t\treject({\r\n\t\t\t\t\tstatus: this.status,\r\n\t\t\t\t\trequest: xhr\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\txhr.onerror = function () {\r\n\t\t\treject({\r\n\t\t\t\tstatus: this.status,\r\n\t\t\t\trequest: xhr\r\n\t\t\t});\r\n\t\t};\r\n\t\tif (body != null && typeof body !== 'undefined') {\r\n\t\t\txhr.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\t\tif (typeof body === 'object')\r\n\t\t\t\tbody = JSON.stringify(body);\r\n\t\t\txhr.send(body);\r\n\t\t} else\r\n\t\t\txhr.send();\r\n\t});\r\n};\r\nconst serializeParams = function(params) {\r\n\tlet str = \"\";\r\n\tfor (const key in params) {\r\n\t\tif (str !== \"\")\r\n\t\t\tstr += \"&\";\r\n\t\tstr += key + \"=\" + encodeURIComponent(params[key]);\r\n\t}\r\n\treturn str.length > 0 ? '?'+str : '';\r\n};\r\n\r\nconst apiHelper = {\r\n\tgetCaptcha: function() {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('GET', 'user/register')\r\n\t\t\t\t.then((xhr) => resolve(getResponse(xhr)))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tregister: function(inputData, captchaKey) {\r\n\t\tconst req = new XMLHttpRequest();\r\n\t\treq.open(\"POST\", constant.ROOT_PATH + \"api/user/register\", false);\r\n\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\tif (inputData.captcha) {\r\n\t\t\tinputData.captcha = {\r\n\t\t\t\tanswer: inputData.captcha,\r\n\t\t\t\tkey: captchaKey\r\n\t\t\t}\r\n\t\t}\r\n\t\treq.send(JSON.stringify(inputData));\r\n\t\treturn req;\r\n\t},\r\n\tlogin: function(user, pass) {\r\n\t\tconst req = new XMLHttpRequest();\r\n\t\treq.open(\"POST\", constant.ROOT_PATH + \"api/user/login\", false);\r\n\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\treq.send(JSON.stringify({\r\n\t\t\tusername: user,\r\n\t\t\tpassword: pass\r\n\t\t}));\r\n\t\tif (req.status === 200) {\r\n\t\t\tvar res = JSON.parse(req.response);\r\n\t\t\tCookies.set('user', JSON.stringify({name: res.name, username: user.toLowerCase()}) || \"unknown\", {\r\n\t\t\t\texpires: in30Minutes\r\n\t\t\t});\r\n\t\t\tCookies.set('token', res.token, {\r\n\t\t\t\texpires: in30Minutes\r\n\t\t\t});\r\n\t\t\tCookies.set('secret', res.refreshSecret, {\r\n\t\t\t\texpires: in30Minutes\r\n\t\t\t});\r\n\t\t}\r\n\t\treturn req;\r\n\t},\r\n\tlogout: function() {\r\n\t\tCookies.remove('user');\r\n\t\tCookies.remove('token');\r\n\t\tCookies.remove('secret');\r\n\t},\r\n\tcreateSongDirty: function(song) {\r\n\t\tvar token = Cookies.get('token');\r\n\t\tif(!(token === undefined)) { // try !(!(!(!(!(!(!(!(token !== undefined)))))))) - alex\r\n\t\t\tvar req = new XMLHttpRequest();\r\n\t\t\treq.open(\"POST\", constant.ROOT_PATH + \"api/songs/create\", false);\r\n\t\t\treq.setRequestHeader(\"Content-Type\", \"application/json\");\r\n\t\t\treq.setRequestHeader(\"Authorization\", token);\r\n\t\t\treq.send(JSON.stringify(song));\r\n\t\t\tconsole.log(req.response);\r\n\t\t\tif (req.status === 200) {\r\n\t\t\t\treturn req.response.id;\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tconsole.log(\"not logged in!\");\r\n\t\t}\r\n\t},\r\n\tcreateSong: function(songData) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tmakeApiRequest('POST', 'songs/create', songData)\r\n\t\t\t\t.then(resolve)\r\n\t\t\t\t.catch(reject);\r\n\t\t});\r\n\t},\r\n\tupdateSong: function(id, songData) {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tmakeApiRequest('POST', 'songs/update/'+id, songData)\r\n\t\t\t\t.then(resolve)\r\n\t\t\t\t.catch(reject);\r\n\t\t});\r\n\t},\r\n\tgetSongsDirty: function(userId) {\r\n\t\tvar req = new XMLHttpRequest();\r\n\t\tvar url;\r\n\t\tif(userId === undefined) {\r\n\t\t\turl = constant.ROOT_PATH + \"api/songs\";\r\n\t\t} else {\r\n\t\t\turl = constant.ROOT_PATH + \"api/songs/get?userId=\" + userId;\r\n\t\t}\r\n\t\treq.open(\"GET\", url, false);\r\n\t\tconst token = Cookies.get('token');\r\n\t\tif (token)\r\n\t\t\treq.setRequestHeader(\"Authorization\", token);\r\n\t\treq.send();\r\n\t\tif (req.status === 200) {\r\n\t\t\treturn JSON.parse(req.response);\r\n\t\t} else {\r\n\t\t\treturn [];\r\n\t\t}\r\n\t},\r\n\tgetSongs: function(userId = null, popular = false, delimiterId = null) {\r\n\t\tconst params = {};\r\n\t\tif (userId) params.userId = userId;\r\n\t\tif (popular) params.popular = 1;\r\n\t\tif (delimiterId) params.delimiterId = delimiterId;\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('GET', 'songs'+serializeParams(params))\r\n\t\t\t\t.then((xhr) => resolve(getResponse(xhr)))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tgetSong: function(id, format = \"full\") {\r\n\t\t// var req = new XMLHttpRequest();\r\n\t\t// req.open(\"GET\", constant.ROOT_PATH + \"api/songs/\" + id + \"/\" + format, true);\r\n\t\t// const token = Cookies.get('token');\r\n\t\t// if (token && format === \"full\")\r\n\t\t\t// req.setRequestHeader(\"Authorization\", token);\r\n\t\tvar songPromise = new Promise((resolve, reject) => {\r\n\t\t\tresolve(songs[id]);\r\n\t\t});\r\n\t\t// req.send();\r\n\t\treturn songPromise;\r\n\t},\r\n\trateSong: function(id, rating = null) {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('POST', 'songs/rate/'+id+(rating ? '/'+rating : ''))\r\n\t\t\t\t.then(() => resolve(true))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tfetchUser: function(username) {\r\n\t\treturn new Promise(function(resolve, reject) {\r\n\t\t\tmakeApiRequest('GET', 'user/fetch/'+username)\r\n\t\t\t\t.then((xhr) => resolve(getResponse(xhr)))\r\n\t\t\t\t.catch((err) => reject(err));\r\n\t\t});\r\n\t},\r\n\tisLoggedIn: function() {\r\n\t\treturn !!Cookies.get('token');\r\n\t},\r\n\tgetCurrentUser: function() {\r\n\t\tif (!Cookies.get('token') || !Cookies.get('user')) return null;\r\n\t\ttry {\r\n\t\t\treturn JSON.parse(Cookies.get('user'));\r\n\t\t} catch (e) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n};\r\n\r\nexport default apiHelper;\r\n","class Track {\r\n    constructor(track) {\r\n\tif (!track === undefined) {\r\n\t    this.track = track;\r\n\t} else {\r\n\t    this.track = {\r\n\t\tblocks: [\r\n\t\t    1\r\n\t\t],\r\n\t\tsettings: {\r\n\t\t    typeId: 1,\r\n\t\t    metadata: \"123ab\"\r\n\t\t}\r\n\t    }\r\n\t}\r\n    }\r\n}\r\n\r\nexport default Track;\r\n","const types = ['off', 'on', 'start', 'end', 'mid'];\r\nconst dataValues = {\r\n    'off': 0, 'on': 1, 'start': 2, 'end': 3, 'mid': 4\r\n}\r\n\r\n// convert block from integer data\r\nvar convertFromData = (data, block) => {\r\n    for (let i = 0; i < data.length; i++)\r\n    {\r\n\tlet dataLine = data[i];\r\n\tlet line = [];\r\n\tfor (let j = 0; j < dataLine.length; j++)\r\n\t{\r\n\t    let value = dataLine[j];\r\n\t    line.push({\r\n\t\ttype: types[value],\r\n\t\tclickF: function() {\r\n\t\t    if(this.type === 'off')\r\n\t\t    {\r\n\t\t\tthis.type = 'on';\r\n\t\t    }\r\n\t\t    else\r\n\t\t    {\r\n\t\t\tthis.type = 'off';\r\n\t\t    }\r\n\t\t},\r\n\t\tstartF: function() {\r\n\t\t    this.type = 'start';\r\n\t\t},\r\n\t\tendF: function() {\r\n\t\t    this.type = 'end';\r\n\t\t},\r\n\t\tmidF: function() {\r\n\t\t    this.type = 'mid';\r\n\t\t}\t\r\n\t    });\r\n\t}\r\n\tblock.push(line);\r\n    }\r\n};\r\n\r\n// playable / editable block\r\nclass Block {\r\n    constructor(storedBlock) {\r\n\tthis.block = [];\r\n\tif (!(storedBlock === undefined)) {\r\n\t    // load block from data\r\n\t    convertFromData(storedBlock.data, this.block);\r\n\t} else {\r\n\t    // create blank block\r\n\t    for (let i = 0; i < 12; i++) {\r\n\t\tlet line = [];\r\n\t\tfor(let j = 0; j < 16; j++) {\r\n\t\t    line.push({\r\n\t\t\ttype: 'off',\r\n\t\t\tclickF: function() {\r\n\t\t\t    if(this.type === 'off')\r\n\t\t\t    {\r\n\t\t\t\tthis.type = 'on';\r\n\t\t\t    }\r\n\t\t\t    else\r\n\t\t\t    {\r\n\t\t\t\tthis.type = 'off';\r\n\t\t\t    }\r\n\t\t\t},\r\n\t\t\tstartF: function() {\r\n\t\t\t    this.type = 'start';\r\n\t\t\t},\r\n\t\t\tendF: function() {\r\n\t\t\t    this.type = 'end';\r\n\t\t\t},\r\n\t\t\tmidF: function() {\r\n\t\t\t    this.type = 'mid';\r\n\t\t\t}\r\n\t\t    });\r\n\t\t}\r\n\t\tthis.block.push(line);\r\n\t    }\r\n\t}\r\n    }\r\n\r\n    convertToData() {\r\n\tlet data = [];\r\n\tfor (let i = 0; i < this.block.length; i++) {\r\n\t    let line = this.block[i];\r\n\t    let dataLine = [];\r\n\t    for (let j = 0; j < line.length; j++) {\r\n\t\tlet value = line[j].type;\r\n\t\tdataLine.push(dataValues[value]);\r\n\t    }\r\n\t    data.push(dataLine);\r\n\t}\r\n\treturn data;\r\n    }\r\n}\r\n\r\nexport default Block;\r\n","import Tone from 'tone';\r\nimport APIHelper from '../../apiHelper.js'\r\nimport Track from './Track.js';\r\nimport Block from './Block.js';\r\n\r\n\r\nclass Song {\r\n\t// User: opening song, id of song\r\n\tconstructor(songMeta) {\r\n\t\tthis.blocks = [];\r\n\t\tthis.tracks = [];\r\n\t\tif (!(songMeta === undefined)) {\r\n\t\t\t// Song exist: Load meta\r\n\t\t\tthis.name = songMeta.name;\r\n\t\t\tthis.bpm = songMeta.bpm;\r\n\t\t\tthis.blockLength = songMeta.blockLength;\r\n\r\n\t\t\tthis.createDate = new Date(songMeta.createDate);\r\n\t\t\tthis.updateDate = songMeta.updateDate ? new Date(songMeta.updateDate) : null;\r\n\t\t\tthis.author = songMeta.user.name;\r\n\t\t\tthis.username = songMeta.user.username;\r\n\t\t\tthis.ratings = songMeta.ratings;\r\n\r\n\t\t\tthis.id = songMeta.id;\r\n\t\t} else {\r\n\t\t\t// Empty meta\r\n\t\t\tthis.name = \"awesome song\";\r\n\t\t\tthis.bpm = 120;\r\n\t\t\tthis.blockLength = 1;\r\n\t\t}\r\n\t\tthis.setKey();\r\n\t\tthis.loaded = false;\r\n\t\tthis.progressListeners = [];\r\n\t}\r\n\r\n\tsetKey(freq, type) {\r\n\t\tthis.freq = freq || \"C\";\r\n\t\tthis.keyType = type || \"Maj\";\r\n\t\tthis.key = [];\r\n\t\tthis.key[11] = (this.freq + \"3\");\r\n\t\tvar step = (type === \"Maj\") ?\r\n\t\t\t[2, 2, 1, 2, 2, 2, 1, 2, 2, 1, 2] :\r\n\t\t\t[2, 1, 2, 2, 1, 2, 2, 2, 1, 2, 2];\r\n\t\tfor (let i = 10, j = 0; i >= 0; i--, j++) {\r\n\t\t\tthis.key[i] = Tone.Frequency(this.key[i+1]).transpose(step[j]);\r\n\t\t}\r\n\t\tif (this.synth) this.synth.releaseAll();\r\n\t}\r\n\r\n\tload(songMeta) {\r\n\t\tthis.blocks.push(null);\r\n\t\tif(this.id === undefined || songMeta === undefined)\r\n\t\t{\r\n\t\t\t// Load empty song\r\n\t\t\tthis.blocks.push(new Block());\r\n\t\t\tthis.tracks.push(new Track());\r\n\t\t} else {\r\n\t\t\t// Load song from composition data\r\n\t\t\tfor (let i = 0; i < songMeta.instruments.length; i++) {\r\n\t\t\t\tthis.tracks.push(new Track(songMeta.instruments[i]));\r\n\t\t\t}\r\n\t\t\tfor (let i = 1; i <= this.blockLength; i++) {\r\n\t\t\t\tlet block = new Block(songMeta.blocks[i]);\r\n\t\t\t\tthis.blocks.push(block);\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.activeBlock = this.blocks[1].block;\r\n\t\tthis.loaded = true;\r\n\t}\r\n\r\n\tinit() {\r\n\t\tTone.Transport.cancel();\r\n\t\tthis.synth = new Tone.PolySynth(6, Tone.Synth).toMaster();\r\n\t\tthis.count = 0;\r\n\t\tthis.loop = new Tone.Loop((time) => {\r\n\t\t\tfor (let i = 0; i < 12; i++) {\r\n\t\t\t\tswitch(this.activeBlock[i][this.count].type) {\r\n\t\t\t\t\tcase 'on':\r\n\t\t\t\t\t\tthis.synth.triggerAttackRelease(this.key[i], '16n', time);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'start':\r\n\t\t\t\t\t\tthis.synth.triggerAttack(this.key[i], time);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 'end':\r\n\t\t\t\t\t\tthis.synth.triggerRelease(this.key[i], time);\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.count >= 15) {\r\n\t\t\t\tthis.count = 0;\r\n\t\t\t} else {\r\n\t\t\t\tthis.count++;\r\n\t\t\t}\r\n\t\t}, '16n');\r\n\t}\r\n\r\n\tplay() {\r\n\t\tif (!this.initialized) {\r\n\t\t\tthis.init();\r\n\t\t\tthis.initialized = true;\r\n\t\t}\r\n\t\tTone.Transport.loopEnd = this.blockLength + \"m\";\r\n\t\tTone.Transport.loop = true;\r\n\t\tTone.Transport.bpm.value = this.bpm;\r\n\t\t//schedule an event on the 16th measure\r\n\t\tthis.progressTickEvent = Tone.Transport.scheduleRepeat(function(time) {\r\n\t\t\tconst pct = Tone.Transport.seconds/Tone.Transport.loopEnd;\r\n\t\t\tif (pct < 0 || pct > 1)\r\n\t\t\t\treturn;\r\n\t\t\tfor (const key of this.progressListeners.keys())\r\n\t\t\t\tthis.progressListeners[key](pct);\r\n\t\t\tconsole.log();\r\n\t\t}.bind(this), \"8i\");\r\n\t\tthis.loop.start(0);\r\n\t\tTone.Transport.start();\r\n\t\tif (this.pauseTime)\r\n\t\t\tTone.Transport.seconds = this.pauseTime;\r\n\t}\r\n\r\n\tpause() {\r\n\t\tthis.pauseTime = Tone.Transport.seconds;\r\n\t\tthis.loop.stop(0);\r\n\t\tTone.Transport.stop();\r\n\t\tthis.synth.releaseAll();\r\n\t\tTone.Transport.clear(this.progressTickEvent);\r\n\t}\r\n\r\n\tsave() {\r\n\t\tif (!this.id) {\r\n\t\t\t// create new song and get id\r\n\t\t\tconst promise = APIHelper.createSong(this.getSendableSong());\r\n\t\t\tpromise.then((xhr) => {\r\n\t\t\t\tconst json = JSON.parse(xhr.response);\r\n\t\t\t\tthis.id = json.id;\r\n\t\t\t});\r\n\t\t\treturn promise;\r\n\t\t} else {\r\n\t\t\t// update song\r\n\t\t\treturn APIHelper.updateSong(this.id, this.getSendableSong());\r\n\t\t}\r\n\t}\r\n\r\n\tgetSendableSong()\r\n\t{\r\n\t\tvar sendableSong = {\r\n\t\t\tname: this.name,\r\n\t\t\tbpm: this.bpm,\r\n\t\t\tblockLength: this.blockLength,\r\n\t\t\tinstruments: this.tracks.map((track) => {\r\n\t\t\t\treturn track.track;\r\n\t\t\t}),\r\n\t\t\tblocks: {}\r\n\t\t};\r\n\t\tfor(let i = 1; i <= (this.blocks.length - 1); i++) {\r\n\t\t\tsendableSong.blocks[i] = {\r\n\t\t\t\tdata: this.blocks[i].convertToData()\r\n\t\t\t};\r\n\t\t}\r\n\t\treturn sendableSong;\r\n\t}\r\n\r\n\tgetFormattedCreate() {\r\n\t\treturn getFormattedDate(this.createDate);\r\n\t}\r\n\r\n\tgetFormattedUpdate() {\r\n\t\treturn getFormattedDate(this.updateDate);\r\n\t}\r\n\r\n\thasBeenUpdated() {\r\n\t\treturn this.updateDate && Math.abs(this.createDate - this.updateDate) >= 50;\r\n\t}\r\n\taddProgressListener(context, listener) {\r\n\t\tthis.progressListeners.push(listener.bind(context));\r\n\t}\r\n\tgetId() {\r\n\t\treturn this.id ? this.id : null;\r\n\t}\r\n}\r\n\r\nconst months = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"July\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\r\n\r\nfunction getFormattedDate(date) {\r\n\tvar currentDate = new Date();\r\n\t// same day\r\n\tif(currentDate.getDate() === date.getDate()\r\n\t\t&& currentDate.getMonth() === date.getMonth()\r\n\t\t&& currentDate.getFullYear() === date.getFullYear())\r\n\t{\r\n\t\tlet totMin = Math.floor((currentDate - date) / 60000);\r\n\t\tlet hours = Math.floor(totMin / 60);\r\n\t\tlet minutes = totMin % 60;\r\n\t\tlet hourString = \"hour\";\r\n\t\tif(hours > 1) hourString += \"s\";\r\n\t\tif(minutes === 0)\r\n\t\t{\r\n\t\t\treturn hours + \" \" + hourString + \"  ago\";\r\n\t\t}\r\n\t\tlet minuteString = \"minute\";\r\n\t\tif(minutes > 1) minuteString += \"s\";\r\n\t\tif(hours === 0)\r\n\t\t{\r\n\t\t\treturn minutes + \" \" + minuteString + \" ago\";\r\n\t\t}\r\n\t\treturn hours + \" \" + hourString + \" and \" + minutes + \" \" + minuteString + \" ago\";\r\n\t}\r\n\treturn months[date.getMonth()] + \" \" + date.getDate() + \", \" + date.getFullYear();\r\n}\r\n\r\nexport default Song;\r\n","import Tone from 'tone';\r\nimport Song from './Song.js';\r\n\r\nclass EditableSong extends Song {\r\n    constructor(songMeta) {\r\n\tsuper(songMeta);\r\n\tthis.selectedTrack = 0;\r\n    }\r\n\r\n    addTrack() {\r\n\t\r\n    }\r\n\r\n    setName(name) {\r\n\tthis.name = name;\r\n    }\r\n\r\n    setBPM(bpm) {\r\n\tthis.bpm = bpm;\r\n\tTone.Transport.bpm.value = this.bpm;\r\n    }\r\n}\r\n\r\nexport default EditableSong;\r\n","import React, { Component } from 'react';\r\n\r\nclass Tile extends Component {\r\n    constructor(props) {\r\n\tsuper(props);\r\n\tthis.state = props.tile;\r\n    }\r\n\r\n    onMouseMove(event) {\r\n    }\r\n\r\n    onMouseDown(event) {\r\n\tthis.props.dragger.active = this.props.line;\r\n\tthis.props.dragger.start = this;\r\n\t//this.state.startF();\r\n\t//this.forceUpdate();\r\n    }\r\n\r\n    onMouseUp(event) {\r\n\tif(this.props.line === this.props.dragger.active)\r\n\t{\r\n\t    if(this.props.dragger.start === this)\r\n\t    {\r\n\t\tthis.state.clickF();\r\n\t    }\r\n\t    else\r\n\t    {\r\n\t\tthis.props.dragger.start.state.startF();\r\n\t\tthis.props.dragger.start.forceUpdate();\r\n\t\tthis.state.endF();\r\n\t    }\r\n\t    this.forceUpdate();\r\n\t}\r\n\tthis.props.dragger.active = null;\r\n    }\r\n\r\n    render() {\r\n\treturn (\r\n\t    <div\r\n\t\tclass={\"tile \" + (this.state.type)}\r\n\t\tonMouseDown={this.onMouseDown.bind(this)}\r\n\t\tonMouseUp={this.onMouseUp.bind(this)}\r\n\t\tonMouseMove={this.onMouseMove.bind(this)}\r\n\t\t>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Tile;\r\n","import React, { Component }  from 'react';\r\n\r\nclass InstrEdit extends Component {\r\n    render(params) {\r\n\treturn (\r\n\t    <div id='instrEdit'>\r\n\t\t<span>Instrument </span>\r\n\t\t<select>\r\n\t\t    <option>Instrument 1</option>\r\n\t\t    <option>Instrument 2</option>\r\n\t\t    <option>Instrument 3</option>\r\n\t\t</select>\r\n\t\t<br />\r\n\t\t<span>Drive </span>\r\n\t\t<input type='number' />\r\n\t\t<input type='range' />\r\n\t\t<br />\r\n\t\t<span>Value 2 </span>\r\n\t\t<input type='number' />\r\n\t\t<input type='range' />\r\n\t\t<br />\r\n\t\t<span>Value 3 </span>\r\n\t\t<input type='number' />\r\n\t\t<input type='range' />\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default InstrEdit;\r\n","import React, { Component } from 'react';\r\nimport Tile from './Tile.js';\r\n\r\nclass Line extends Component {\r\n    render() {\r\n\tlet tiles = [];\r\n\tfor(let i = 0; i < 16; i++)\r\n\t{\r\n\t    tiles.push(<Tile tile={this.props.line[i]} line={this.props.lineNum} dragger={this.props.dragger} />);\r\n\t}\r\n\treturn (\r\n\t    <div class='line'>\r\n\t\t{tiles}\t\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Line;\r\n","import React, { Component } from 'react';\r\n\r\nimport Line from './Line.js';\r\n\r\nclass BlockEdit extends Component {\r\n    constructor(props) {\r\n\tsuper(props);\r\n\tthis.dragger = {\r\n\t    active: -1,\r\n\t    start: null\r\n\t}\r\n    }\r\n    \r\n    render() {\r\n\tlet lines = [];\r\n\tfor(let i = 0; i < 12; i ++)\r\n\t{\r\n\t    lines.push(<Line line={this.props.block[i]} lineNum={i} dragger={this.dragger} />);\r\n\t}\r\n\treturn (\r\n\t    <div id='blockEdit'>\r\n\t\t{lines}\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default BlockEdit;\r\n","import React, { Component } from 'react';\r\n\r\nclass Template extends Component {\r\n    render() {\r\n\treturn (\r\n\t    <div>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Template;\r\n","import React, { Component } from 'react';\r\nimport Block from './Block.js';\r\n\r\nclass Track extends Component {\r\n\r\n\r\n    remove() {\r\n\tthis.props.remove(this);\r\n    }\r\n\r\n    render() {\r\n\treturn (\r\n\t    <div className=\"track\">\r\n\t\t<h1 onClick={this.remove.bind(this)}>{this.props.id}</h1>\r\n\t\t<Block />\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Track;\r\n","import React, { Component } from 'react';\r\nimport './editor.css';\r\nimport './awesome.css';\r\nimport APIHelper from '../apiHelper.js';\r\nimport EditableSong from './song/EditableSong.js';\r\nimport InstrEdit from './InstrEdit.js';\r\nimport BlockEdit from './blockEdit/BlockEdit.js';\r\nimport Time from './time/Time.js';\r\n\r\nclass Editor extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tplaying: false,\r\n\t\t\terror: false,\r\n\t\t\tname: \"\",\r\n\t\t\tbpm: 120,\r\n\t\t\tkey: \"\",\r\n\t\t\tkeyType: \"\"\r\n\t\t};\r\n\t\tthis.keysArray = [\"C\", \"D\", \"E\", \"F\", \"G\", \"A\", \"B\"];\r\n\t\tthis.keyOptions = this.keysArray.map((key) => {\r\n\t\t\treturn (<option>{key}</option>);\r\n\t\t});\r\n\t\tthis.ready = false;\r\n\t\tthis.songId = props.match.params.id;\r\n\t\tif (this.songId === \"new\") {\r\n\t\t\tthis.song = new EditableSong();\r\n\t\t\tthis.song.load();\r\n\t\t\tthis.song.init();\r\n\t\t\tthis.ready = true;\r\n\t\t} else if (!(this.songId === undefined)) {\r\n\t\t\tAPIHelper.getSong(this.songId)\r\n\t\t\t\t.then((res) => {\r\n\t\t\t\t\treturn JSON.parse(res);\r\n\t\t\t\t})\r\n\t\t\t\t.then((parsed) => {\r\n\t\t\t\t\tthis.song = new EditableSong(parsed);\r\n\t\t\t\t\tthis.song.load(parsed);\r\n\t\t\t\t\tthis.song.init();\r\n\t\t\t\t\tthis.ready = true;\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tname: this.song.name,\r\n\t\t\t\t\t\tbpm: this.song.bpm,\r\n\t\t\t\t\t\tkey: this.song.freq,\r\n\t\t\t\t\t\tkeyType: this.song.keyType\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.forceUpdate();\r\n\t\t\t\t})\r\n\t\t\t\t.catch((err) => {\r\n\t\t\t\t\tthis.state.error = true;\r\n\t\t\t\t\tthis.state.errComp = <h1> Could not load song: {err} </h1>;\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tif(false && this.song && !this.ready)\r\n\t\t{\r\n\t\t\tthis.song.load(this.songMeta);\r\n\t\t\tthis.song.init();\r\n\t\t\tthis.ready = true;\r\n\t\t\tthis.forceUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\tscheduleButtonReset() {\r\n\t\tif (this.notificationTask)\r\n\t\t\tclearTimeout(this.notificationTask);\r\n\t\tthis.notificationTask = setTimeout(() => this.setState({saveBtn: null}), 2000);\r\n\t}\r\n\tcomponentWillUnmount() {\r\n\t\tif (this.notificationTask)\r\n\t\t\tclearTimeout(this.notificationTask);\r\n\t}\r\n\r\n\thandleToggle() {\r\n\t\tthis.setState(state => ({\r\n\t\t\tplaying: !state.playing\r\n\t\t}));\r\n\t\tif(this.state.playing) {\r\n\t\t\tthis.song.pause();\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.song.play();\r\n\t\t}\r\n\t}\r\n\r\n\tonSave(evt) {\r\n\t\tevt.preventDefault();\r\n\t\tif (!this.song.name || this.song.name === '') {\r\n\t\t\tthis.setState({\r\n\t\t\t\tsaveBtn: 3\r\n\t\t\t});\r\n\t\t\tthis.scheduleButtonReset();\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.setState({\r\n\t\t\tsaveBtn: 1\r\n\t\t});\r\n\t\tthis.song.save().then(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tsaveBtn: 2\r\n\t\t\t});\r\n\t\t\tthis.scheduleButtonReset();\r\n\t\t}).catch(() => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tsaveBtn: 3\r\n\t\t\t});\r\n\t\t\tthis.scheduleButtonReset();\r\n\t\t});\r\n\t}\r\n\r\n\tonChange(evt) {\r\n\t\tlet newState = {};\r\n\t\tlet val = evt.target.value;\r\n\t\tswitch (evt.target.id) {\r\n\t\t\tcase \"name\":\r\n\t\t\t\tthis.song.setName(val);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"bpm\":\r\n\t\t\t\tif (val !== \"\") {\r\n\t\t\t\t\tif (val < 1) {\r\n\t\t\t\t\t\tval = 1;\r\n\t\t\t\t\t} else if (val > 500) {\r\n\t\t\t\t\t\tval = 500;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.song.setBPM(val);\r\n\t\t\t\t}\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"keyType\":\r\n\t\t\t\tthis.song.setKey(this.state.key, val);\r\n\t\t\t\tbreak;\r\n\t\t\tcase \"key\":\r\n\t\t\t\tthis.song.setKey(val, this.state.keyType);\r\n\t\t}\r\n\t\tnewState[evt.target.id] = val;\r\n\t\tthis.setState(newState);\r\n\t}\r\n\r\n\trender() {\r\n\t\tif(this.state.error) {\r\n\t\t\treturn this.state.errComp;\r\n\t\t}\r\n\t\tif(!this.song || !this.ready) {\r\n\t\t\treturn ( <div> </div> );\r\n\t\t}\r\n\r\n\t\treturn (\r\n\t\t\t<div className=\"container econtainer\" style={{'margin-top': '40px'}}>\r\n\t\t\t\t{/* {!APIHelper.isLoggedIn() &&\r\n\t\t\t\t<div className=\"alert alert-danger\" role=\"alert\">\r\n\t\t\t\t\tYou are not logged in, saving songs will not be possible! If you plan on making something awesome, login first!\r\n\t\t\t\t</div>\r\n\t\t\t\t} */}\r\n\t\t\t\t<div className=\"editor\">\r\n\t\t\t\t\t<div className=\"editor-header\">\r\n\t\t\t\t\t    <span className=\"header-left\">\r\n\t\t\t\t\t\t    <i onClick={this.handleToggle.bind(this)}\r\n\t\t\t\t\t\t       className={\"fa \" + (this.state.playing ? \"fa-stop\" : \"fa-play\")}></i>\r\n\t\t\t\t\t\t    <div className=\"header-controls\">\r\n\t\t\t\t\t\t        <span>BPM </span>\r\n\t\t\t\t\t\t        <input value={this.state.bpm} id='bpm' onChange={evt => this.onChange(evt)} type=\"number\"/>\r\n\t\t\t\t\t\t        <span>Key </span>\r\n\t\t\t\t\t\t        <select id=\"key\" value={this.state.key} onChange={evt => this.onChange(evt)}>\r\n\t\t\t\t\t\t\t    {this.keyOptions}\r\n\t\t\t\t\t\t        </select>\r\n\t\t\t\t\t\t        <select onChange={evt => this.onChange(evt)} id=\"keyType\" value={this.state.keyType}>\r\n\t\t\t\t\t\t\t    <option>Maj</option>\r\n\t\t\t\t\t\t\t    <option>min</option>\r\n\t\t\t\t\t\t        </select>\r\n\t\t\t\t\t\t    </div>\r\n\t\t\t\t\t    </span>\r\n\t\t\t\t\t\t<div className=\"song-name\">\r\n\t\t\t\t\t\t\t<form onSubmit={(evt) => this.onSave(evt)}>\r\n\t\t\t\t\t\t\t\t<input required onChange={evt => this.onChange(evt)} value={this.state.name} id='name'\r\n\t\t\t\t\t\t\t\t       type='text' placeholder='untitled' className=\"name-input\"/>\r\n\t\t\t\t\t\t\t\t<input type='submit' style={{minWidth: '120px'}} value={this.state.saveBtn ? (this.state.saveBtn === 1 ? 'Loading...' : (this.state.saveBtn === 2 ? 'Saved!' : 'Failed!')) : 'Save'} disabled={!!this.state.saveBtn} className={'btn '+(!this.state.saveBtn ? 'btn-light' : this.state.saveBtn !== 3 ? 'btn-success' : 'btn-danger')}/>\r\n\t\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t{/* <InstrEdit/> */}\r\n\t\t\t\t\t\t<BlockEdit block={this.song.activeBlock}/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<br/><br/><br/>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Editor;\r\n","import React, { Component } from 'react';\r\nimport Track from './Track.js';\r\n\r\nclass Time extends Component {\r\n    constructor(props)\r\n    {\r\n\tsuper(props);\r\n\tthis.id = 1;\r\n\tthis.state = {\r\n\t    tracks: [<Track id='0' remove={this.removeTrack.bind(this)} />]\r\n\t}\r\n\tthis.offset = 0;\r\n    }\r\n\r\n    addTrack()\r\n    {\r\n\tvar copy = this.state.tracks.slice(0);\r\n\tcopy.push(<Track id={this.id} remove={this.removeTrack.bind(this)}/>);\r\n\tthis.setState(state => ({\r\n\t    tracks: copy\r\n\t}));\r\n\tthis.id++;\r\n    }\r\n\r\n    removeTrack(me)\r\n    {\r\n\tthis.setState(state => ({\r\n\t    tracks: state.tracks.filter(function(value) {\r\n\t\treturn !(me.props.id === value.props.id);\r\n\t    })\r\n\t}));\r\n    }\r\n\r\n    render()\r\n    {\r\n\treturn (\r\n\t    <div>\r\n\t\t{this.state.tracks}\r\n\t\t<h1 onClick={this.addTrack.bind(this)}>Create track</h1>\r\n\t    </div>\r\n\t);\r\n    }\r\n}\r\n\r\nexport default Time;\r\n","import { Component } from 'react';\r\nimport React from \"react\";\r\nimport apiHelper from \"./apiHelper\";\r\n\r\nclass SongRating extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\thover: undefined,\r\n\t\t\tuserValue: this.props.song.ratings ? this.props.song.ratings.currentUserRating : null\r\n\t\t};\r\n\t\tthis.value = 4.5;\r\n\t}\r\n\tonMouseEnter(pos) {\r\n\t\tif (!this.props.changeable)\r\n\t\t\treturn;\r\n\t\tthis.setState({\r\n\t\t\thover: pos\r\n\t\t});\r\n\t}\r\n\tonMouseLeave() {\r\n\t\tif (!this.props.changeable)\r\n\t\t\treturn;\r\n\t\tthis.setState({\r\n\t\t\thover: undefined\r\n\t\t});\r\n\t}\r\n\tsetRating(rating) {\r\n\t\tif (!this.props.changeable)\r\n\t\t\treturn;\r\n\t\trating = rating === this.state.userValue ? null : rating;\r\n\t\tapiHelper.rateSong(this.props.song.id, rating)\r\n\t\t\t.then(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tuserValue: rating\r\n\t\t\t\t});\r\n\t\t\t})\r\n\t\t\t.catch((err) => {\r\n\t\t\t\t// TODO implement properly\r\n\t\t\t\tconsole.log(err);\r\n\t\t\t});\r\n\t}\r\n\trender() {\r\n\t\tconst stars = [];\r\n\t\tfor (let i = 1; i <= 5; i++) {\r\n\t\t\tlet classes = \"star\";\r\n\t\t\tif (Math.ceil(this.props.value) >= i) {\r\n\t\t\t\tif (this.props.value < i) {\r\n\t\t\t\t\tclasses += \" half\";\r\n\t\t\t\t} else {\r\n\t\t\t\t\tclasses += \" full\";\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (this.state.userValue && this.state.userValue >= i) {\r\n\t\t\t\tclasses += \" active\";\r\n\t\t\t}\r\n\t\t\tif (this.state.hover && this.state.hover >= i) {\r\n\t\t\t\tclasses += \" hover\";\r\n\t\t\t}\r\n\t\t\tstars.push(<div\r\n\t\t\t\tclassName={classes}\r\n\t\t\t\tonMouseEnter={this.onMouseEnter.bind(this, i)}\r\n\t\t\t\tonMouseLeave={this.onMouseLeave.bind(this)}\r\n\t\t\t\tonClick={this.setRating.bind(this, i)}>\r\n\t\t\t</div>);\r\n\t\t}\r\n\t\tlet classes = \"song-rating\"+(this.props.changeable ? \" changeable\" : \"\");\r\n\t\treturn (\r\n\t\t\t<div className={classes}>{stars}</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SongRating;","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport APIHelper from './apiHelper.js';\r\nimport SongRating from './SongRating.js';\r\nimport constants from \"./constants\";\r\n\r\nclass SongPlayer extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tredirect: false,\r\n\t\t\tto: \"\",\r\n\t\t\tplayBtn: \"play-btn\",\r\n\t\t\tplaying: false\r\n\t\t};\r\n\t\tthis.song = props.song;\r\n\t\tthis.song.addProgressListener(this, (pct) => {\r\n\t\t\tthis.setState({\r\n\t\t\t\tprogress: Math.floor(pct*100)+'%'\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tonEdit() {\r\n\t\tlet id = this.song.id || \"\";\r\n\t\tthis.setState({\r\n\t\t\tredirect: true,\r\n\t\t\tto: \"/editor/\" + id\r\n\t\t});\r\n\t}\r\n\r\n\tonPlayPause() {\r\n\t\tif (this.loading)\r\n\t\t\treturn;\r\n\t\tif (this.state.playing) {\r\n\t\t\tthis.setState({ playBtn: \"play-btn\", playing: false });\r\n\t\t\tthis.song.pause();\r\n\t\t} else {\r\n\t\t\tif (!this.song.loaded) {\r\n\t\t\t\tthis.loading = true;\r\n\t\t\t\tAPIHelper.getSong(this.song.id, 'composition')\r\n\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\treturn JSON.parse(data);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.then((parsed) => {\r\n\t\t\t\t\t\tthis.song.load(parsed);\r\n\t\t\t\t\t\tthis.loading = false;\r\n\t\t\t\t\t\tthis.onPlayPause();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t// Could not play error\r\n\t\t\t\t\t});\r\n\t\t\t} else {\r\n\t\t\t\tthis.setState({ playBtn: \"pause-btn\", playing: true });\r\n\t\t\t\tthis.song.play();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tif (this.state.redirect) {\r\n\t\t\treturn <Redirect to={this.state.to} />;\r\n\t\t}\r\n\t\treturn (\r\n\t\t\t<li>\r\n\t\t\t\t<div className=\"song-header\" style={{background: '#007eff45'}}>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button onClick={() => this.onPlayPause()} className={\"btn btn-light playback-btn \" + this.state.playBtn}></button>\r\n\t\t\t\t\t\t<div className=\"song-title\">{this.song.name}</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t{APIHelper.getCurrentUser() && APIHelper.getCurrentUser().username === this.song.username &&\r\n\t\t\t\t\t\t<div className=\"buttons-container\">\r\n\t\t\t\t\t\t\t<button onClick={()=> this.onEdit()} className=\"btn btn-light\"><i className=\"fa fa-pencil\"></i></button>\r\n\t\t\t\t\t\t\t<button className=\"btn btn-light\"><i className=\"fa fa-trash\"></i></button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t<a href={constants.ROOT_PATH+'profile/'+this.song.username} className=\"song-artist\">\r\n\t\t\t\t\t\t\t<div className=\"name\">{this.song.author}</div>\r\n\t\t\t\t\t\t\t<div className=\"username\">@{this.song.username}</div>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className=\"play-progress\" style={{width: this.state.progress}}></div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"song-body\">\r\n\t\t\t\t\t<SongRating song={this.song} changeable={true} value={4.5} />\r\n\t\t\t\t\t<div className=\"song-dates\">\r\n\t\t\t\t\t\t<span className=\"song-creation-date\">Created {this.song.getFormattedCreate()}</span>\r\n\t\t\t\t\t\t<span className=\"song-update-date\">{\r\n\t\t\t\t\t\t\tthis.song.hasBeenUpdated() ? \"Updated \" + this.song.getFormattedUpdate() : \"\"\r\n\t\t\t\t\t\t}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SongPlayer;\r\n","import React, { Component } from 'react';\r\nimport APIHelper from './apiHelper.js';\r\nimport SongPlayer from './SongPlayer.js';\r\nimport Song from './editor/song/Song.js';\r\n\r\nclass SongList extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.songs = [\r\n\t\t\t// {\r\n\t\t\t// \tname: 'Hey Jude',\r\n\t\t\t// \tbpm: '120',\r\n\t\t\t// \tblockLength: '1',\r\n\t\t\t// \tcreateDate: 'December 17, 1995 03:24:00',\r\n\t\t\t// \tupdateDate: 'December 17, 1995 03:24:00',\r\n\t\t\t// \tuser: {\r\n\t\t\t// \t\tname: 'Carson',\r\n\t\t\t// \t\tusername: 'username'\r\n\t\t\t// \t},\r\n\t\t\t// \tratings: 3,\r\n\t\t\t// \tid: 0\r\n\t\t\t// }\r\n\t\t];\r\n\t\tthis.state = {\r\n\t\t\tloading: false\r\n\t\t};\r\n\t\tthis.loadMore();\r\n\t}\r\n\tloadMore() {\r\n\t\tif (this.state.loading)\r\n\t\t\treturn;\r\n\t\tthis.setState({loading: true});\r\n\t\tlet songs = [\r\n\t\t\t{\r\n\t\t\t\tname: 'Party Time',\r\n\t\t\t\tbpm: '120',\r\n\t\t\t\tblockLength: '1',\r\n\t\t\t\tcreateDate: 'December 17, 1995 03:24:00',\r\n\t\t\t\tupdateDate: 'December 17, 1995 03:24:00',\r\n\t\t\t\tuser: {\r\n\t\t\t\t\tname: 'briltz',\r\n\t\t\t\t\tusername: 'jbriltz'\r\n\t\t\t\t},\r\n\t\t\t\tratings: 7,\r\n\t\t\t\tid: 0\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'Change key to F',\r\n\t\t\t\tbpm: '80',\r\n\t\t\t\tblockLength: '1',\r\n\t\t\t\tcreateDate: 'December 17, 1995 03:24:00',\r\n\t\t\t\tupdateDate: 'December 17, 1995 03:24:00',\r\n\t\t\t\tuser: {\r\n\t\t\t\t\tname: 'briltz',\r\n\t\t\t\t\tusername: 'jbriltz'\r\n\t\t\t\t},\r\n\t\t\t\tratings: 7,\r\n\t\t\t\tid: 1\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'yhA yeet',\r\n\t\t\t\tbpm: '90',\r\n\t\t\t\tblockLength: '1',\r\n\t\t\t\tcreateDate: 'December 17, 1995 03:24:00',\r\n\t\t\t\tupdateDate: 'December 17, 1995 03:24:00',\r\n\t\t\t\tuser: {\r\n\t\t\t\t\tname: 'jake',\r\n\t\t\t\t\tusername: 'jdudarewicz'\r\n\t\t\t\t},\r\n\t\t\t\tratings: 7,\r\n\t\t\t\tid: 2\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'Demo',\r\n\t\t\t\tbpm: '85',\r\n\t\t\t\tblockLength: '1',\r\n\t\t\t\tcreateDate: 'December 17, 1995 03:24:00',\r\n\t\t\t\tupdateDate: 'December 17, 1995 03:24:00',\r\n\t\t\t\tuser: {\r\n\t\t\t\t\tname: 'Carson',\r\n\t\t\t\t\tusername: 'verso'\r\n\t\t\t\t},\r\n\t\t\t\tratings: 7,\r\n\t\t\t\tid: 3\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'Winter Night',\r\n\t\t\t\tbpm: '40',\r\n\t\t\t\tblockLength: '1',\r\n\t\t\t\tcreateDate: 'December 17, 1995 03:24:00',\r\n\t\t\t\tupdateDate: 'December 17, 1995 03:24:00',\r\n\t\t\t\tuser: {\r\n\t\t\t\t\tname: 'briltz',\r\n\t\t\t\t\tusername: 'jbriltz'\r\n\t\t\t\t},\r\n\t\t\t\tratings: 7,\r\n\t\t\t\tid: 4\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\tname: 'Easily',\r\n\t\t\t\tbpm: '50',\r\n\t\t\t\tblockLength: '1',\r\n\t\t\t\tcreateDate: 'December 17, 1995 03:24:00',\r\n\t\t\t\tupdateDate: 'December 17, 1995 03:24:00',\r\n\t\t\t\tuser: {\r\n\t\t\t\t\tname: 'briltz',\r\n\t\t\t\t\tusername: 'jbriltz'\r\n\t\t\t\t},\r\n\t\t\t\tratings: 7,\r\n\t\t\t\tid: 5\r\n\t\t\t}\r\n\t\t];\r\n\t\t\t\tthis.delimiterId = null;\r\n\t\t\t\tfor (const i in songs) {\r\n\t\t\t\t\tconst songData = songs[i];\r\n\t\t\t\t\tif (songData.hasOwnProperty('delimiterId')) {\r\n\t\t\t\t\t\tthis.delimiterId = songData.delimiterId;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.songs.push(<SongPlayer song={new Song(songData)} />);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.setState({loading: false, loaded: true});\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t{this.songs.length === 0 && this.state.loaded ?\r\n\t\t\t\t\t<p className=\"text-center\">Looks like there are no songs to display :(</p>\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<ul className='song-list'>\r\n\t\t\t\t\t\t{this.songs}\r\n\t\t\t\t\t</ul>\r\n\t\t\t\t}\r\n\t\t\t\t{(this.state.loading || this.delimiterId) &&\r\n\t\t\t\t<div className=\"song-list-footer\">\r\n\t\t\t\t\t{!this.delimiterId ?\r\n\t\t\t\t\t\t<div className=\"loading\">Loading...</div>\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<button className=\"btn btn-light load-more-btn\" disabled={this.state.loading} onClick={this.loadMore.bind(this)}>{this.state.loading ? 'Loading...' : 'Load More'}</button>\r\n\t\t\t\t\t}\r\n\t\t\t\t</div>\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default SongList;\r\n","import React, { Component } from 'react';\r\nimport constant from './constants.js';\r\nimport SongList from \"./SongList\";\r\nimport Link from \"react-router-dom/es/Link\";\r\n\r\nclass Home extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.slide1 = {\r\n\t\t\tbackgroundImage: 'url(' + constant.ROOT_PATH + 'assets/Slide1.png)'\r\n\t\t};\r\n\t\tthis.slide2 = {\r\n\t\t\tbackgroundImage: 'url(' + constant.ROOT_PATH + 'assets/Slide2.png)'\r\n\t\t};\r\n\t\tthis.slide3 = {\r\n\t\t\tbackgroundImage: 'url(' + constant.ROOT_PATH + 'assets/Slide3.png)'\r\n\t\t};\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<header>\r\n\t\t\t\t\t<div id=\"carouselExampleIndicators\" className=\"carousel slide\" data-ride=\"carousel\">\r\n\t\t\t\t\t\t<ol className=\"carousel-indicators\">\r\n\t\t\t\t\t\t\t<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"0\" className=\"active\"></li>\r\n\t\t\t\t\t\t\t<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"1\"></li>\r\n\t\t\t\t\t\t\t<li data-target=\"#carouselExampleIndicators\" data-slide-to=\"2\"></li>\r\n\t\t\t\t\t\t</ol>\r\n\t\t\t\t\t\t<div className=\"carousel-inner\" role=\"listbox\">\r\n\t\t\t\t\t\t\t<div className=\"carousel-item active\" style={this.slide1}>\r\n\t\t\t\t\t\t\t\t<div class=\"slide\">\r\n\t\t\t\t\t\t\t\t\t<h1 class=\"slide-cap\">Create 8-Bit Music in Just Minutes</h1>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"carousel-item\" style={this.slide2}>\r\n\t\t\t\t\t\t\t\t<div class=\"slide\">\r\n\t\t\t\t\t\t\t\t\t<h1 class=\"slide-cap\">Perfect For Retro-Style Games</h1>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"carousel-item\" style={this.slide3}>\r\n\t\t\t\t\t\t\t\t<div class=\"slide\">\r\n\t\t\t\t\t\t\t\t\t<h1 class=\"slide-cap\">Get Started With Our Free Chiptune Editor</h1>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<a className=\"carousel-control-prev\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"prev\">\r\n\t\t\t\t\t\t\t<span className=\"carousel-control-prev-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t<span className=\"sr-only\">Previous</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t<a className=\"carousel-control-next\" href=\"#carouselExampleIndicators\" role=\"button\" data-slide=\"next\">\r\n\t\t\t\t\t\t\t<span className=\"carousel-control-next-icon\" aria-hidden=\"true\"></span>\r\n\t\t\t\t\t\t\t<span className=\"sr-only\">Next</span>\r\n\t\t\t\t\t\t</a>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</header>\r\n\t\t\t\t<div className=\"container content\">\r\n\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t<div className=\"col-lg-9 col-md-8\">\r\n\t\t\t\t\t\t\t<h3>Popular Songs</h3>\r\n\t\t\t\t\t\t\t<SongList popular={true} />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"col-lg-3 col-md-4\">\r\n\t\t\t\t\t\t\t<h3>About</h3>\r\n\t\t\t\t\t\t\t<p>Chip Share is a chiptune song sharing website! It is developed using the <a href=\"https://reactjs.org/\">React</a> framework for the front-end, and <a href=\"https://expressjs.com/\">Express</a> for the back-end.</p>\r\n\t\t\t\t\t\t\t<p>This school project has been collectively developed by Jake, Carson, Mishel, and Alex at Ryerson University, Toronto, Canada.</p>\r\n\t\t\t\t\t\t\t<h3>Get Started</h3>\r\n\t\t\t\t\t\t\t<p>Try out our custom chiptune editor to create your very own songs! Simply <Link to={'/register'}>create an account</Link> and play around to master the art of 8-bit music!</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Home;\r\n","import React, { Component } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport APIHelper from './apiHelper.js';\r\nimport constants from \"./constants\";\r\n\r\nclass Login extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfieldErrors: {},\r\n\t\t\terror: null,\r\n\t\t\tredirect: null\r\n\t\t};\r\n\t}\r\n\tonSubmit(event) {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.refs.username.value.length === 0 || this.refs.password.value.length === 0) {\r\n\t\t\tthis.setState({\r\n\t\t\t\terrors: null,\r\n\t\t\t\tfieldErrors: {\r\n\t\t\t\t\tusername: this.refs.username.value.length === 0 ? 'This field is required.' : null,\r\n\t\t\t\t\tpassword: this.refs.password.value.length === 0 ? 'This field is required.' : null\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tconst request = APIHelper.login(this.refs.username.value, this.refs.password.value);\r\n\t\tswitch (request.status) {\r\n\t\t\tcase 200:\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tredirect: constants.ROOT_PATH+'profile/'+this.refs.username.value.toLowerCase()\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 400:\r\n\t\t\t\tlet fieldErrors = null;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tfieldErrors = JSON.parse(request.response).fieldErrors;\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: null,\r\n\t\t\t\t\tfieldErrors: fieldErrors\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tlet message = \"Unknown error occurred.\";\r\n\t\t\t\ttry {\r\n\t\t\t\t\tmessage = JSON.parse(request.response).message;\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: message.charAt(0).toUpperCase()+message.substring(1)+'.',\r\n\t\t\t\t\tfieldErrors: {}\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\thideError(input) {\r\n\t\tconst fieldErrors = this.state.fieldErrors;\r\n\t\tdelete fieldErrors[input];\r\n\t\tthis.setState({\r\n\t\t\tfieldErrors: fieldErrors\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn this.state.redirect ? <Redirect to={this.state.redirect} /> :\r\n\t\t(\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-lg-4 offset-lg-4 col-sm-6 offset-sm-3 col-10 offset-1\">\r\n\t\t\t\t\t\t<form onSubmit={(evt) => this.onSubmit(evt)} className=\"form-login\">\r\n\t\t\t\t\t\t\t<h1>Login</h1>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<input ref=\"username\" onChange={() => this.state.fieldErrors.username ? this.hideError('username') : {}} type=\"text\" className={'form-control'+(this.state.fieldErrors.username ? ' is-invalid' : '')} placeholder=\"Username\" />\r\n\t\t\t\t\t\t\t\t<div className=\"invalid-feedback\">{this.state.fieldErrors.username || ''}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t<input ref=\"password\" onChange={() => this.state.fieldErrors.password ? this.hideError('password') : {}} type=\"password\" className={'form-control'+(this.state.fieldErrors.password ? ' is-invalid' : '')} placeholder=\"Password\" />\r\n\t\t\t\t\t\t\t\t<div className=\"invalid-feedback\">{this.state.fieldErrors.password || ''}</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"form-group\">\r\n\t\t\t\t\t\t\t\t{this.state.error &&\r\n\t\t\t\t\t\t\t\t<div style={{'margin': '-10px 0 5px'}}><small className=\"text-warning\">{this.state.error}</small></div>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">Login</button>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<div className=\"register-prompt\">\r\n\t\t\t\t\t\t\t<h2>Don't have an account?</h2>\r\n\t\t\t\t\t\t\t<Link to=\"/register\">Register Here</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Login;\r\n","import React, { Component } from 'react';\r\n\r\nclass TextInput extends Component {\r\n\tgetValue() {\r\n\t\treturn this.refs.input.value;\r\n\t}\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"form-group\">\r\n\t\t\t\t<input ref=\"input\" name={this.props.name} onChange={() => this.props.fieldErrors[this.props.name] ? this.props.hideError(this.props.name) : {}} type={this.props.type || 'text'} className={'form-control'+(this.props.fieldErrors[this.props.name] ? ' is-invalid' : '')} placeholder={this.props.placeholder || ''} />\r\n\t\t\t\t<div className=\"invalid-feedback\">{this.props.fieldErrors[this.props.name] || ''}</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default TextInput;","import React, { Component } from 'react';\r\nimport { Redirect, Link } from 'react-router-dom';\r\nimport APIHelper from './apiHelper.js';\r\nimport TextInput from \"./layout/TextInput\";\r\nimport constants from \"./constants\";\r\n\r\nclass Register extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tfieldErrors: {},\r\n\t\t\terror: null,\r\n\t\t\tredirect: null,\r\n\t\t\tcaptcha: null\r\n\t\t};\r\n\t\tAPIHelper.getCaptcha()\r\n\t\t\t.then((response) => {\r\n\t\t\t\tthis.captchaKey = response.captcha.key;\r\n\t\t\t\t//const captcha = new DOMParser().parseFromString(parsed.captcha.image, \"text/xml\").firstChild;\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcaptcha: <div dangerouslySetInnerHTML={{__html: response.captcha.image}}></div>\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t.catch(() => {\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tcaptcha: 'Failed to load!'\r\n\t\t\t\t})\r\n\t\t\t});\r\n\t}\r\n\tonSubmit(event) {\r\n\t\tevent.preventDefault();\r\n\t\tif (this.ensureErrorCorrection && Object.keys(this.state.fieldErrors).length > 0)\r\n\t\t\treturn;\r\n\t\tconst inputData = {\r\n\t\t\tname: this.refs.name.getValue(),\r\n\t\t\tusername: this.refs.username.getValue(),\r\n\t\t\tpassword: this.refs.password.getValue(),\r\n\t\t\tcaptcha: this.refs.captcha.getValue()\r\n\t\t};\r\n\t\tlet clientError = false;\r\n\t\tfor (const key in inputData) {\r\n\t\t\tif (inputData[key].length === 0) {\r\n\t\t\t\tthis.state.fieldErrors[key] = 'This field is required.';\r\n\t\t\t\tthis.forceUpdate();\r\n\t\t\t\tclientError = true;\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (this.refs['repeat-password'].getValue() !== this.refs.password.getValue()) {\r\n\t\t\tthis.state.fieldErrors['repeat-password'] = 'Passwords do not match.';\r\n\t\t\tthis.forceUpdate();\r\n\t\t\tclientError = true;\r\n\t\t}\r\n\t\tif (clientError)\r\n\t\t\treturn;\r\n\t\tconst request = APIHelper.register(inputData, this.captchaKey);\r\n\t\tswitch (request.status) {\r\n\t\t\tcase 201:\r\n\t\t\t\tconst loginRequest = APIHelper.login(inputData.username, inputData.password);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tredirect: loginRequest.status === 200 ? constants.ROOT_PATH+'profile/'+inputData.username.toLowerCase() : constants.ROOT_PATH+'login'\r\n\t\t\t\t});\r\n\t\t\t\tbreak;\r\n\t\t\tcase 400:\r\n\t\t\t\tlet fieldErrors = null;\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconst json = JSON.parse(request.response);\r\n\t\t\t\t\tfieldErrors = json.fieldErrors || {};\r\n\t\t\t\t\tif (json.captchaError)\r\n\t\t\t\t\t\tfieldErrors.captcha = json.captchaError\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: null,\r\n\t\t\t\t\tfieldErrors: fieldErrors\r\n\t\t\t\t});\r\n\t\t\t\tthis.ensureErrorCorrection = true;\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tlet message = \"Unknown error occurred.\";\r\n\t\t\t\ttry {\r\n\t\t\t\t\tmessage = JSON.parse(request.response).message;\r\n\t\t\t\t} catch (e) {}\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: message.charAt(0).toUpperCase()+message.substring(1)+'.',\r\n\t\t\t\t\tfieldErrors: {}\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\thideError(input) {\r\n\t\tconst fieldErrors = this.state.fieldErrors;\r\n\t\tdelete fieldErrors[input];\r\n\t\tthis.setState({\r\n\t\t\tfieldErrors: fieldErrors\r\n\t\t});\r\n\t}\r\n\trender() {\r\n\t\treturn this.state.redirect ? <Redirect to={this.state.redirect} /> :\r\n\t\t(\r\n\t\t\t<div className=\"container\">\r\n\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t<div className=\"col-lg-4 offset-lg-4 col-sm-6 offset-sm-3 col-10 offset-1\">\r\n\t\t\t\t\t\t<form onSubmit={(evt) => this.onSubmit(evt)} className=\"form-login\">\r\n\t\t\t\t\t\t\t<h1>Register</h1>\r\n\t\t\t\t\t\t\t<TextInput ref=\"name\" name=\"name\" placeholder=\"Name\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<TextInput ref=\"username\" name=\"username\" placeholder=\"Username\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<TextInput ref=\"password\" name=\"password\" type=\"password\" placeholder=\"Password\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<TextInput ref=\"repeat-password\" name=\"repeat-password\" type=\"password\" placeholder=\"Repeat Password\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t<div className=\"captcha-group\">\r\n\t\t\t\t\t\t\t\t<div className=\"captcha-container\">{this.state.captcha || 'Loading captcha...'}</div>\r\n\t\t\t\t\t\t\t\t<TextInput ref=\"captcha\" name=\"captcha\" placeholder=\"Captcha Answer\" fieldErrors={this.state.fieldErrors} hideError={this.hideError.bind(this)} />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<button className=\"btn btn-primary\" type=\"submit\">Register</button>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<hr />\r\n\t\t\t\t\t\t<div className=\"register-prompt\">\r\n\t\t\t\t\t\t\t<h2>Already have an account?</h2>\r\n\t\t\t\t\t\t\t<Link to=\"/login\">Login Here</Link>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default Register;\r\n","import React, { Component } from 'react';\r\nimport APIHelper from './apiHelper.js';\r\nimport SongList from \"./SongList\";\r\n\r\nclass Profile extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tloading: true\r\n\t\t};\r\n\t\tif (this.props.match && this.props.match.params && this.props.match.params.username) {\r\n\t\t\tAPIHelper.fetchUser(this.props.match.params.username)\r\n\t\t\t\t.then(user => {\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\tloading: false,\r\n\t\t\t\t\t\tuser: user\r\n\t\t\t\t\t});\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tif (err.status === 404) {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\tloading: false,\r\n\t\t\t\t\t\t\tuser: null\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\t// TODO display error\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t} else {\r\n\t\t\tthis.state.loading = false;\r\n\t\t\tthis.state.user = null;\r\n\t\t}\r\n\t}\r\n\trender() {\r\n\t\tif (this.state.loading)\r\n\t\t\treturn (\r\n\t\t\t\t<div className=\"info-box\">\r\n\t\t\t\t\t<p>Loading...</p>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t\telse\r\n\t\t\treturn (\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t<div className=\"col-12 col-lg-8 offset-lg-2\">\r\n\t\t\t\t\t\t\t\t{!this.state.user ?\r\n\t\t\t\t\t\t\t\t\t<div className=\"info-box\">\r\n\t\t\t\t\t\t\t\t\t\t<h1>User Not Found</h1>\r\n\t\t\t\t\t\t\t\t\t\t<p>This profile page does not exist.</p>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t:\r\n\t\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t\t<h1 className=\"account-name\">{this.state.user.name}</h1>\r\n\t\t\t\t\t\t\t\t\t\t<span className=\"account-username\">@{this.state.user.username}</span>\r\n\t\t\t\t\t\t\t\t\t\t<SongList userId={this.state.user.id}/>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t);\r\n\t}\r\n}\r\n\r\nexport default Profile;\r\n","import React, { Component } from 'react';\r\nimport constant from \"./constants\";\r\n\r\nclass MenuDropdown extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<li className='dropdown' onClick={this.toggleOpen}>\r\n\t\t\t\t<a href='#' className={'nav-link dropdown-toggle'} data-toggle=\"dropdown\">\r\n\t\t\t\t\t{this.props.item.title}\r\n\t\t\t\t</a>\r\n\t\t\t\t<div className={'dropdown-menu'}>\r\n\t\t\t\t\t{this.props.item.items.map((listItem) => {\r\n\t\t\t\t\t\treturn <a className=\"dropdown-item\" href={constant.ROOT_PATH+listItem.path}>{listItem.title}</a>\r\n\t\t\t\t\t})}\r\n\t\t\t\t</div>\r\n\t\t\t</li>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default MenuDropdown;","import React, { Component } from 'react';\r\nimport { Redirect } from 'react-router-dom';\r\nimport APIHelper from \"./apiHelper\";\r\nimport constants from \"./constants\";\r\n\r\nclass Logout extends Component {\r\n\trender() {\r\n\t\tAPIHelper.logout();\r\n\t\treturn <Redirect to={constants.ROOT_PATH} />\r\n\t}\r\n}\r\n\r\nexport default Logout;","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router, Route, Link } from \"react-router-dom\";\r\nimport Editor from './editor/Editor.js';\r\nimport Home from './Home.js';\r\nimport Login from './Login.js';\r\nimport Register from './Register.js';\r\nimport Profile from './Profile.js';\r\nimport constant from './constants.js';\r\nimport MenuDropdown from \"./MenuDropdown\";\r\nimport APIHelper from './apiHelper';\r\nimport Logout from \"./Logout\";\r\n\r\nclass App extends Component {\r\n\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.user = APIHelper.getCurrentUser();\r\n\t\tthis.menu = [\r\n\t\t\t{ title: \"Browse\", path: \"/\"},\r\n\t\t\t{ title: \"Create\", path: \"/editor/new\" },\r\n\t\t\t{ title: \"My Songs\", path: \"/profile/\"+(this.user ? this.user.username : ''), userOnly: true },\r\n\t\t\t\r\n\t\t]\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet navBarItems = this.menu.map((menuItem) => {\r\n\t\t\tif (menuItem.userOnly && !this.user)\r\n\t\t\t\treturn;\r\n\t\t    return menuItem.items ? <MenuDropdown item={menuItem} /> : <li className={'nav-item'+(menuItem.items ? ' dropdown' : '')}>\r\n\t\t\t    <a href={menuItem.path} className={\"nav-link \"+(window.location.pathname === menuItem.path ? \"active\" : \"\")}>\r\n\t\t\t\t    {menuItem.title}\r\n\t\t\t    </a>\r\n\t\t    </li>;\r\n\t\t});\r\n\t\tconst UserMenu = () => {\r\n\t\t    const user = APIHelper.getCurrentUser();\r\n\t\t    return <ul className=\"navbar-nav ml-auto\">\r\n\t\t\t{!user ?\r\n\t\t\t(<a className=\"nav-link\" href={constant.ROOT_PATH + \"login\"}>Log In / Register</a>)\r\n\t\t\t    :\r\n\t\t\t(<li className=\"nav-item dropdown\">\r\n\t\t\t\t<a className=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n\t\t\t\t\tLogged in as: {user.name}\r\n\t\t\t\t</a>\r\n\t\t\t\t<div className=\"dropdown-menu\" aria-labelledby=\"navbarDropdown\">\r\n\t\t\t\t\t<a className=\"dropdown-item\" href={constant.ROOT_PATH + \"logout\"}>Log Out</a>\r\n\t\t\t\t</div>\r\n\t\t\t</li>)}\r\n\t\t\t</ul>;\r\n\t\t};\r\n\t\treturn (\r\n\t\t\t<div className=\"App\">\r\n\t\t\t\t<Router basename={constant.ROOT_PATH}>\r\n\t\t\t\t    <div>\r\n\t\t\t\t\t\t<nav className=\"navbar navbar-expand-lg navbar-dark bg-dark fixed-top\">\r\n\t\t\t\t\t\t\t<div className=\"container\">\r\n\t\t\t\t\t\t\t\t<a className=\"navbar-brand\" href={constant.ROOT_PATH}>Chip Share</a>\r\n\t\t\t\t\t\t\t\t<button className=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarResponsive\" aria-controls=\"navbarResponsive\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n\t\t\t\t\t\t\t\t\t<span className=\"navbar-toggler-icon\"></span>\r\n\t\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t\t<div className=\"collapse navbar-collapse\" id=\"navbarResponsive\">\r\n\t\t\t\t\t\t\t\t\t<ul className=\"navbar-nav mr-auto\">\r\n\t\t\t\t\t\t\t\t\t\t{navBarItems}\r\n\t\t\t\t\t\t\t\t\t</ul>\r\n\t\t\t\t\t\t\t\t\t<Route path=\"/\" component={UserMenu} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</nav>\r\n\t\t\t\t\t\t<Route path=\"/\" exact component={Home} />\r\n\t\t\t\t\t\t<Route path=\"/editor\" component={Editor} />\r\n\t\t\t\t\t\t<Route path=\"/editor/:id\" component={Editor} />\r\n\t\t\t\t\t\t<Route path=\"/login\" component={Login} />\r\n\t\t\t\t\t\t<Route path=\"/register\" component={Register} />\r\n\t\t\t\t\t\t<Route path=\"/profile/:username?\" component={Profile} />\r\n\t\t\t\t\t    <Route path=\"/logout\" component={Logout} />\r\n\t\t\t\t    </div>\r\n\t\t\t\t</Router>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read http://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: http://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}